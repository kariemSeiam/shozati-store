import{r as e,j as s,a7 as t,P as a,a8 as r,a as n,C as l,a4 as i,a5 as o,R as c,S as d,i as m,Q as x,I as u,L as h,ad as p,p as b,h as g,aq as f,aC as j,a9 as y,aD as v,aE as N}from"./vendor-react-BJ-jiNb_.js";import{A as w,c as C,C as k,b as S,d as P,e as I,f as A,g as z,h as L,u as T,i as M}from"./hooks-CiPcQEk5.js";import{P as O,B as F,a as q,F as D,M as E}from"./components-ByS-VOv1.js";const V=()=>s.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",className:"absolute inset-0 w-full h-full opacity-10",children:[s.jsx("defs",{children:s.jsxs("pattern",{id:"premium-pattern",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:[s.jsx("circle",{cx:"5",cy:"5",r:"0.5",fill:"currentColor"}),s.jsx("circle",{cx:"0",cy:"0",r:"0.3",fill:"currentColor"}),s.jsx("circle",{cx:"10",cy:"10",r:"0.3",fill:"currentColor"})]})}),s.jsx("rect",{width:"100%",height:"100%",fill:"url(#premium-pattern)"})]}),$=({icon:t,onClick:a,isActive:r,label:n})=>{const[l,i]=e.useState(!1);return s.jsxs("button",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:a,className:"relative p-3 rounded-2xl overflow-hidden group hover:scale-105 active:scale-95 transition-transform duration-200",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-primary-50/50 to-white \n                     backdrop-blur-xl transition-all duration-300"}),s.jsx("div",{className:"absolute inset-0 text-primary-500/10",children:s.jsx(V,{})}),s.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 "+(l?"bg-gradient-to-br from-blue-200/20 to-indigo-200/20":"")}),s.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 rounded-2xl transition-all duration-300 "+(l?"ring-2 ring-blue-300/30 shadow-lg shadow-blue-200/20":"")}),s.jsx("div",{className:"relative transition-all duration-300 "+(l?"scale-110 -translate-y-0.5":"scale-100 translate-y-0"),children:s.jsx(t,{className:"w-6 h-6 transition-all duration-300\n                       "+(l?"text-primary-600 filter drop-shadow-lg":"text-primary-700")})}),n&&l&&s.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 \n                     text-xs font-medium text-primary-600 whitespace-nowrap\n                     animate-in fade-in slide-in-from-top-2 duration-300",children:n})]})},U=()=>s.jsx("div",{className:"relative px-4 animate-in fade-in slide-in-from-top-5 duration-500",children:s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:"/logo.png",alt:"Shozati Logo",className:"h-10 w-auto"}),s.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary-500/20 via-primary-400/20 to-primary-500/20 \n                   blur-xl opacity-0 rounded-full animate-pulse"})]})}),R=({onOrdersClick:n,onProfileClick:l})=>{const{isAuthenticated:i,login:o}=e.useContext(w),[c,d]=e.useState(!1),[m,x]=e.useState(!1),u=async e=>{i?"orders"===e?n():"profile"===e&&l():d(!0)};return s.jsxs("header",{className:"sticky top-0 z-40 animate-in fade-in slide-in-from-top-5 duration-500",children:[s.jsx("div",{className:"relative px-4 py-2",children:s.jsxs("div",{className:"flex justify-between items-center max-w-6xl mx-auto",children:[s.jsx($,{icon:t,onClick:()=>u("profile"),label:"Profile"}),s.jsx(U,{}),s.jsx($,{icon:a,onClick:()=>u("orders"),label:"Orders"})]})}),s.jsx(O,{isOpen:c,onClose:()=>d(!1),onVerified:async e=>{x(!0);try{await o(e.phone_number)&&d(!1)}catch(s){throw r.error(s.message||"Login failed"),s}finally{x(!1)}},loading:m,isLogin:!0})]})},B=({onSelect:t})=>{const{slides:a,loading:r,error:c,fetchSlides:d}=C(),[m,x]=e.useState(0),[u,h]=e.useState(!1),[p,b]=e.useState(null),g=e.useRef({start:0,end:0}),f=e.useRef(null),j=e.useRef(null),y=e.useCallback(e=>{let s=e;e<0?s=a?.length-1:e>=a?.length&&(s=0),x(s)},[a?.length]),v=e.useCallback(e=>{b(e),y("right"===e?m-1:m+1),setTimeout(()=>b(null),300)},[m,y]);return e.useEffect(()=>{if(!(!a?.length||a.length<=1||u))return f.current=setInterval(()=>{v("left")},5e3),()=>f.current&&clearInterval(f.current)},[a,u,v]),r?s.jsx("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-primary-50",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(n,{className:"w-8 h-8 text-primary-500 animate-spin"})})}):c?s.jsx("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-primary-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(l,{className:"w-12 h-12 text-rose-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-700 mb-4",children:"فشل في تحميل المحتوى"}),s.jsx("button",{onClick:d,className:"btn-primary",children:"إعادة المحاولة"})]})}):a?.length?s.jsx("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-neutral-50 shadow-md",children:s.jsxs("div",{ref:j,className:"absolute inset-0 transition-transform duration-300",dir:"rtl",onTouchStart:e=>{h(!0),g.current={start:e.touches[0].clientX,startTime:Date.now(),end:e.touches[0].clientX}},onTouchMove:e=>{g.current.end=e.touches[0].clientX;const s=g.current.start-g.current.end,t=j.current;t&&(t.style.transform=`translateX(${.5*-s}px)`)},onTouchEnd:()=>{h(!1);const e=j.current;e&&(e.style.transform="");const{start:s,end:t,startTime:a}=g.current,r=s-t,n=Date.now()-a,l=Math.abs(r/n);(Math.abs(r)>50||l>.5)&&v(r>0?"left":"right"),g.current={start:0,end:0}},children:[s.jsx(i,{initial:!1,mode:"wait",children:a.map((e,a)=>s.jsx(o.div,{initial:{opacity:0,x:"left"===p?100:-100},animate:{opacity:a===m?1:0,x:a===m?0:"left"===p?-100:100,transition:{duration:.3}},exit:{opacity:0,x:"left"===p?-100:100},className:"absolute inset-0 cursor-pointer",onClick:()=>t?.(e.product),children:s.jsxs("div",{className:"relative h-full",children:[s.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",loading:0===a?"eager":"lazy"}),s.jsx("div",{className:"absolute"}),s.jsxs("div",{className:"absolute bottom-0 right-0 p-6 text-right max-w-2xl",children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-2 drop-shadow-lg",children:e.title}),s.jsx("p",{className:"text-sm text-neutral-100 drop-shadow-md",children:e.description})]})]})},e.id))}),s.jsx("div",{className:"absolute bottom-2 inset-x-0 flex justify-center gap-2 z-20",children:a.map((e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),y(t)},className:"group","aria-label":`الانتقال إلى الشريحة ${t+1}`,children:s.jsx(o.div,{animate:{width:m===t?24:8,opacity:m===t?1:.7},className:"h-2 bg-white rounded-full transition-all duration-300 \r\n                         shadow-sm group-hover:opacity-90"})},t))})]})}):null},Q=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),X=c.memo(({item:t,onRemove:r,onUpdateQuantity:n})=>{const[i,o]=e.useState(!1),[c,d]=e.useState(!1),x=e.useCallback(e=>{o(!0),e<1?d(!0):(n(t.cartItemId,e),setTimeout(()=>o(!1),300))},[t.cartItemId,n]),u=e.useCallback(()=>{c?(r(t.cartItemId),d(!1)):d(!0)},[c,t.cartItemId,r]);return s.jsxs("div",{className:"group relative card p-3 sm:p-4 \r\n                transition-all duration-200",dir:"rtl",children:[c&&s.jsx("div",{className:"absolute inset-0 z-20 rounded-2xl \r\n                    bg-white/95 backdrop-blur-sm\r\n                    flex items-center justify-center\r\n                    transition-opacity duration-200",children:s.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 text-center",children:[s.jsx(l,{className:"w-8 h-8 text-red-500"}),s.jsx("p",{className:"text-slate-800 font-medium",children:"هل تريد حذف هذا المنتج؟"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-rose-500 text-white rounded-xl\r\n                          font-medium hover:bg-rose-600 \r\n                          transition-colors duration-200",children:"تأكيد الحذف"}),s.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"إلغاء"})]})]})}),i&&s.jsx("div",{className:"absolute inset-0 z-10 rounded-2xl bg-primary-50/30 \r\n                      flex items-center justify-center",children:s.jsx("div",{className:"bg-white/90 p-2 rounded-full shadow-lg",children:s.jsx(m,{className:"w-5 h-5 text-primary-500"})})}),s.jsxs("div",{className:"relative flex gap-3 sm:gap-4",children:[s.jsx("div",{className:"relative flex-none w-20 sm:w-28 aspect-square",children:s.jsxs("div",{className:"relative h-full rounded-xl overflow-hidden \r\n                         bg-gradient-to-b from-neutral-50 to-white\r\n                         ring-1 ring-neutral-100 group-hover:ring-primary-100\r\n                         transition-all duration-300",children:[s.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transform transition-all \r\n                         duration-500 group-hover:scale-105"}),s.jsxs("div",{className:"absolute bottom-1.5 left-1.5 \r\n                         bg-white/95 px-2 py-0.5 text-xs font-semibold\r\n                         text-primary-600 rounded-full shadow-md\r\n                         ring-1 ring-primary-100",children:["×",t.quantity]})]})}),s.jsx("button",{onClick:()=>!i&&d(!0),className:" absolute left-0 top-0 z-10 flex-left p-2 sm:p-2.5 rounded-xl\r\n                     bg-red-50 text-red-500 hover:bg-red-100\r\n                     transition-colors duration-200\r\n                     disabled:opacity-50",disabled:i,"aria-label":"حذف المنتج",children:s.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"font-bold text-neutral-900 \r\n                          group-hover:text-primary-600 \r\n                          transition-colors duration-300\r\n                          text-sm sm:text-base truncate",children:t.name}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(a,{className:"w-3.5 h-3.5 text-neutral-400"}),s.jsxs("p",{className:"text-xs sm:text-sm text-neutral-500",children:[t.size," - ",t.colorName]})]}),s.jsxs("div",{className:"flex items-baseline gap-1.5",children:[s.jsx("span",{className:"text-base sm:text-lg font-bold \r\n                           bg-gradient-to-l from-primary-600 to-primary-500 \r\n                           bg-clip-text text-transparent",children:Q(t.price)}),s.jsx("span",{className:"text-xs sm:text-sm text-neutral-400",children:"/ القطعة"})]})]}),s.jsxs("div",{className:"flex justify-between items-end \r\n                         pt-2 sm:pt-3 mt-1 sm:mt-2\r\n                         border-t border-neutral-100",children:[s.jsxs("div",{className:"flex items-center gap-1 p-1 \r\n                           bg-neutral-50 rounded-lg \r\n                           group-hover:bg-primary-50/50",children:[s.jsx("button",{onClick:()=>x(t.quantity+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-md bg-white \r\n                           text-neutral-600 flex items-center justify-center \r\n                           shadow-sm hover:bg-primary-50 hover:text-primary-600\r\n                           transition-colors duration-200",disabled:i,children:s.jsx(g,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),s.jsx("div",{className:"w-8 sm:w-10 text-center",children:s.jsx("span",{className:"text-neutral-800 font-semibold \r\n                                text-sm sm:text-base",children:t.quantity})}),s.jsx("button",{onClick:()=>x(t.quantity-1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-md bg-white \r\n                           text-neutral-600 flex items-center justify-center \r\n                           shadow-sm hover:bg-primary-50 hover:text-primary-600\r\n                           disabled:opacity-50 disabled:cursor-not-allowed\r\n                           transition-colors duration-200",disabled:t.quantity<=1||i,children:s.jsx(f,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),s.jsxs("div",{className:"text-right ",children:[s.jsx("span",{className:"text-xs sm:text-sm text-neutral-500",children:"الإجمالي"}),s.jsx("div",{className:"text-base sm:text-lg font-bold \r\n                           bg-gradient-to-l from-primary-600 to-primary-500 \r\n                           bg-clip-text text-transparent",children:Q(t.price*t.quantity)})]})]})]})]})]})}),W=({isProcessing:t,onApplyCoupon:a})=>{const[r,n]=e.useState(""),i=e.useRef(null),{cartTotal:o}=e.useContext(k),{validateCoupon:c,currentCoupon:d,validatingCoupon:m,error:u,clearError:p,calculateDiscount:b,clearCoupon:g}=P();e.useEffect(()=>()=>{g()},[g]);const f=e.useCallback(async e=>{if(e?.preventDefault(),!r.trim()||m||t)return;const s=await c(r,o);if(s){const e=b(o);a({...s,discount:e})}},[r,m,t,c,o,b,a]),j=e.useCallback(e=>{const s=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");n(s),u&&p()},[u,p]),y=e.useCallback(()=>{n(""),g(),a(null)},[g,a]);return s.jsxs("div",{className:"space-y-3",dir:"rtl",children:[s.jsxs("form",{onSubmit:f,className:"relative group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:i,type:"text",value:r,onChange:j,placeholder:"أدخل كود الخصم",maxLength:8,className:"w-full px-4 py-3 rounded-xl bg-white border border-primary-100\r\n                     focus:border-primary-500 focus:ring-2 focus:ring-primary-200\r\n                     transition-all duration-300 text-neutral-800\r\n                     placeholder:text-neutral-400 tracking-wide\r\n                     disabled:opacity-60 disabled:cursor-not-allowed\r\n                     group-hover:border-primary-200",disabled:t||m}),r&&s.jsxs("span",{className:"absolute left-28 top-1/2 -translate-y-1/2 text-xs text-neutral-400",children:[r.length,"/8"]}),s.jsxs("button",{type:"submit",disabled:!r.trim()||t||m,className:"absolute left-2 top-2 px-4 py-1.5 bg-primary-500 text-white rounded-lg\r\n                     font-medium hover:bg-primary-600 transition-colors duration-200\r\n                     disabled:opacity-50 disabled:cursor-not-allowed\r\n                     hover:shadow-md hover:shadow-primary-100\r\n                     flex items-center gap-2",children:[m?s.jsx(h,{className:"w-4 h-4 animate-spin"}):s.jsx(x,{className:"w-4 h-4"}),s.jsx("span",{children:"تطبيق"})]})]}),!r&&s.jsx("p",{className:"absolute -bottom-6 right-2 text-xs text-neutral-500 pointer-events-none opacity-70",children:"ادخل كود الخصم الخاص بك للحصول على خصم إضافي"})]}),u&&s.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 \r\n                     px-4 py-3 rounded-xl text-sm\r\n                     border border-red-100 shadow-sm",children:[s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{children:u})]}),d&&s.jsxs("div",{className:"flex items-center justify-between gap-2 \r\n                     bg-success-50 px-4 py-3 rounded-xl\r\n                     border border-success-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-100 p-2 rounded-lg",children:s.jsx(x,{className:"w-5 h-5 text-success-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-success-700",children:"percentage"===d.discountType?`خصم ${d.discountValue}%`:`خصم ${Q(d.discountValue)}`}),s.jsx("p",{className:"text-sm text-success-600",children:"تم تطبيق كود الخصم بنجاح"})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"font-bold text-success-600",children:Q(b(o))}),s.jsx("button",{onClick:y,className:"text-xs text-success-600 hover:text-success-700\r\n                         underline underline-offset-2",children:"إزالة"})]})]})]})},G=({orderDetails:t,handleConfirmOrder:a,onBack:r,isLoading:n})=>{const{cartTotal:l,cart:i}=e.useContext(k),{currentCoupon:o}=P(),[c,d]=e.useState(null),{shippingCost:b,discount:g,finalTotal:f,itemsWithDiscount:j}=e.useMemo(()=>{const e=l>500?0:25,s=c||o,t=s?"percentage"===s.discountType?l*s.discountValue/100:s.discountValue:0,a=i.map(e=>{const a=e.price*e.quantity,r=s?"percentage"===s.discountType?a*s.discountValue/100:a/l*t:0;return{...e,originalTotal:a,discountAmount:Math.round(100*r)/100,finalTotal:Math.round(100*(a-r))/100}});return{shippingCost:e,discount:Math.round(100*t)/100,finalTotal:Math.round(100*(l+e-t))/100,itemsWithDiscount:a}},[i,l,o,c]),y=e.useCallback(()=>{a(c?.code||"")},[a,c,l,b,g,f,j]);return s.jsxs("div",{className:"space-y-4 font-arabic",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-primary-50 rounded-3xl p-6 space-y-6\r\n                    border border-primary-100 shadow-sm relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5 bg-repeat"}),s.jsxs("div",{className:"relative space-y-2",dir:"rtl",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 rounded-full p-2",children:s.jsx(x,{className:"w-5 h-5 text-primary-600"})}),s.jsx("h4",{className:"font-bold text-xl text-neutral-800",children:"كوبون الخصم"})]})}),s.jsx(W,{onApplyCoupon:d,isProcessing:n})]}),s.jsxs("div",{className:"relative space-y-2 pt-4 border-t border-primary-100",dir:"rtl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 rounded-full p-2",children:s.jsx(u,{className:"w-5 h-5 text-primary-600"})}),s.jsx("h4",{className:"font-bold text-xl text-neutral-800",children:"عنوان التوصيل"})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 space-y-3 border border-primary-100 shadow-sm\r\n                         hover:shadow-md transition-shadow duration-300",children:[s.jsx("p",{className:"text-neutral-800 text-lg leading-relaxed",children:t.address.details}),s.jsxs("p",{className:"text-neutral-500 flex items-center gap-2",children:[s.jsx("span",{children:t.address.governorate}),s.jsx("span",{className:"text-primary-500",children:"•"}),s.jsx("span",{children:t.address.district})]})]})]}),s.jsx("div",{className:"relative space-y-4 pt-6 border-t border-primary-100",dir:"rtl",children:s.jsxs("div",{className:"space-y-4 bg-white rounded-2xl p-5 border border-primary-100",children:[j.map((e,t)=>s.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-neutral-100 last:border-0 last:pb-0",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-neutral-800",children:e.name}),s.jsxs("span",{className:"text-neutral-500",children:["×",e.quantity]})]}),e.discountAmount>0&&s.jsxs("div",{className:"text-sm text-success-600",children:["وفرت ",Q(e.discountAmount)]})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-neutral-800",children:Q(e.originalTotal)}),e.discountAmount>0&&s.jsx("div",{className:"text-sm text-success-600 font-bold",children:Q(e.finalTotal)})]})]},t)),s.jsxs("div",{className:"space-y-3 pt-4 border-t border-primary-100",children:[s.jsxs("div",{className:"flex justify-between text-neutral-600",children:[s.jsx("span",{children:"المجموع الفرعي"}),s.jsx("span",{className:"font-bold",children:Q(l)})]}),s.jsxs("div",{className:"flex justify-between text-neutral-600",children:[s.jsx("span",{children:"رسوم التوصيل"}),s.jsx("span",{className:"font-bold "+(0===b?"text-success-600":""),children:0===b?"مجاناً":Q(b)})]}),g>0&&s.jsxs("div",{className:"flex justify-between text-success-600",children:[s.jsx("span",{children:"الخصم"}),s.jsxs("span",{className:"font-bold",children:["- ",Q(g)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-neutral-100",dir:"ltr",children:[s.jsx("span",{className:"text-xl font-bold text-primary-600",children:Q(f)}),s.jsx("span",{className:"text-lg text-neutral-800",children:"المجموع الكلي"})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{disabled:n,onClick:y,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 \r\n                   text-white rounded-xl py-4 font-bold text-lg\r\n                   disabled:opacity-50 flex items-center justify-center gap-3\r\n                   hover:brightness-105 transition-all duration-200",children:n?s.jsx(h,{className:"w-6 h-6 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"w-6 h-6"}),s.jsx("span",{children:"تأكيد الطلب"})]})}),s.jsxs("button",{onClick:r,className:"w-full bg-neutral-100 text-neutral-700 rounded-xl py-4 \r\n                   font-bold text-lg flex items-center justify-center gap-3\r\n                   hover:bg-neutral-200 transition-colors duration-200",children:[s.jsx(p,{className:"w-6 h-6"}),s.jsx("span",{children:"العودة للسلة"})]})]})]})},_=({orderId:e,onViewOrders:t,emptyCart:a})=>s.jsxs("div",{className:"text-center py-12 space-y-6",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-success-100 to-success-50 mx-auto flex items-center justify-center shadow-md",children:s.jsx(m,{className:"w-12 h-12 text-success-500"})}),s.jsx("div",{className:"space-y-4",children:s.jsx("h3",{className:"text-xl font-bold text-neutral-800 p-2",children:"تم تأكيد طلبك بنجاح"})}),s.jsx("button",{onClick:()=>{a(),t()},className:"bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-xl px-8 py-3 font-bold hover:shadow-lg hover:brightness-105 transition-all duration-200",children:"متابعة الطلب"})]}),H=()=>s.jsx("div",{className:"flex flex-col items-center justify-center py-16 px-6 min-h-[400px] bg-gradient-to-br from-primary-50/30 via-white to-primary-50/20 rounded-2xl relative",children:s.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center max-w-sm mx-auto",children:[s.jsx("div",{className:"relative mb-6",children:s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary-500/10 via-primary-400/10 to-primary-600/10 \r\n                      flex items-center justify-center shadow-xl shadow-primary-500/10 border border-primary-200/30\r\n                      backdrop-blur-sm",children:s.jsx(d,{className:"w-10 h-10 text-primary-600"})})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-800 leading-tight",children:"السلة فارغة"}),s.jsx("p",{className:"text-neutral-600 text-base leading-relaxed",children:"لم تقم بإضافة أي منتجات للسلة بعد"})]}),s.jsx("div",{className:"mt-6 w-16 h-0.5 bg-gradient-to-r from-transparent via-primary-400 to-transparent rounded-full"})]})}),Z=({onOrderCreated:t,checkAuthAndProceed:a,openModal:n})=>{const{cart:l,isCartOpen:o,setIsCartOpen:c,removeFromCart:m,updateQuantity:x,emptyCart:u}=e.useContext(k),{userInfo:h}=e.useContext(w),{createOrder:p}=S(),[b,g]=e.useState({isProcessing:!1,confirmation:{show:!1,orderId:null,success:!1,total:0},error:null}),f=e.useCallback(()=>{a({requiresAuth:!0,requiresAddress:!0,onSuccess:()=>{g(e=>({...e,confirmation:{show:!0,orderId:null,success:!1,total:0}}))},onNotAuthenticated:()=>{n("showLogin")},onNoAddress:()=>{n("showLocation")}})},[a,n]),j=e.useCallback(async e=>{try{g(e=>({...e,isProcessing:!0,error:null}));const s={items:l.map(e=>({variant_id:e.variantId,size:e.size,quantity:e.quantity})),addressId:h.addresses[0].id,coupon:e||0},t=await p(s);t.success?(g(e=>({...e,isProcessing:!1,confirmation:{show:!0,orderId:t.order.id,success:!0,total:t.order.total,coupon:t.order.coupon}})),r.success("تم إنشاء طلبك بنجاح",{style:{background:"#EFF6FF",color:"#1E40AF"}})):(g(e=>({...e,isProcessing:!1,error:t.error})),r.error(t.error))}catch(s){g(e=>({...e,isProcessing:!1,error:s.message})),r.error(s.message)}},[l,h?.addresses,p]),y=e.useCallback(()=>{g(e=>({...e,confirmation:{show:!1,orderId:null,success:!1,total:0}}))},[]),v=e.useCallback(()=>{c(!1),g({isProcessing:!1,confirmation:{show:!1,orderId:null,success:!1,total:0},error:null}),t(b.confirmation.orderId)},[b.confirmation.orderId,t,c]);return s.jsx(F,{isOpen:o,onClose:()=>c(!1),title:"سلة التسوق",className:"bg-white",children:s.jsx("div",{className:"p-4",children:s.jsx(i,{mode:"wait",children:b.confirmation.success?s.jsx(_,{orderId:b.confirmation.orderId,onViewOrders:v,emptyCart:u,className:"bg-white shadow-lg rounded-xl p-6"}):b.confirmation.show?s.jsx(G,{orderDetails:{address:h.addresses[0],items:l,error:b.error},handleConfirmOrder:j,onBack:y,isLoading:b.isProcessing,className:"bg-white shadow-lg rounded-xl p-6"}):0===l.length?s.jsx(H,{}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"space-y-4",children:l.map(e=>s.jsx(X,{item:e,onRemove:m,onUpdateQuantity:x},`${e.id}-${e.variantId}-${e.size}`))}),s.jsxs("button",{onClick:f,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-xl py-4 font-bold hover:shadow-lg hover:brightness-105 transition-all duration-200 flex items-center justify-center gap-2",children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("span",{children:"متابعة الشراء"})]})]})})})})},J=e.memo(({selectedCategory:t,onSelect:a})=>{const r=e.useMemo(()=>[{id:"all",name:"الكل",icon:d,locked:!1,comingSoon:!1},{id:"women",name:"حريمي",icon:d,locked:!1,comingSoon:!1},{id:"men",name:"رجالي",icon:d,locked:!1,comingSoon:!1},{id:"bags",name:"شنط",icon:d,locked:!0,comingSoon:!0},{id:"accessories",name:"إكسسوارات",icon:d,locked:!0,comingSoon:!0}],[]);return s.jsxs("div",{className:"relative",dir:"rtl",children:[s.jsx("div",{className:"px-4 pt-3 pb-1",children:s.jsx("div",{className:"overflow-x-auto hide-scrollbar",children:s.jsx("div",{className:"flex gap-2 pb-2",children:r.map(e=>s.jsxs("button",{onClick:()=>!e.locked&&a(e.id),className:`relative min-w-max flex items-center gap-2 px-4 py-2.5 rounded-2xl \n                          text-sm font-medium transition-all duration-300 overflow-hidden backdrop-blur-sm\n                          ${e.locked?"bg-primary-50/40 text-primary-600/60 opacity-70":t===e.id?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg shadow-primary-500/25 border border-primary-400/30":"bg-white/70 text-slate-700 hover:bg-white/90 hover:shadow-md border border-neutral-200/50 hover:border-primary-200/50"} ${e.locked?"":"hover:scale-105 active:scale-95"}`,disabled:e.locked,children:[t===e.id&&!e.locked&&s.jsx("div",{className:"absolute inset-0 bg-pattern-dots opacity-10"}),s.jsx(e.icon,{className:"w-4 h-4 relative z-10 transition-all duration-300 "+(e.locked?"text-primary-400/70":t===e.id?"text-white drop-shadow-sm":"text-primary-600")}),s.jsx("span",{className:"relative z-10 font-medium",children:e.name}),e.comingSoon&&s.jsxs("div",{className:"flex items-center gap-1 relative z-10",children:[s.jsx(j,{className:"w-3.5 h-3.5 text-primary-400"}),s.jsx("span",{className:"text-xs text-primary-400 font-medium",children:"قريباً"})]}),t===e.id&&!e.locked&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute -right-1 -top-1 z-20",children:s.jsx(y,{className:"w-4 h-4 text-white drop-shadow-sm animate-pulse"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-400/20 to-primary-600/20 rounded-2xl blur-sm"})]})]},e.id))})})}),s.jsx("div",{className:"absolute top-0 right-0 w-12 h-full bg-gradient-to-l from-white/30 to-transparent pointer-events-none"}),s.jsx("div",{className:"absolute top-0 left-0 w-12 h-full bg-gradient-to-r from-white/30 to-transparent pointer-events-none"})]})});J.displayName="HorizontalCategoryScroller";const K=({productCode:t})=>{const{setIsCartOpen:a}=e.useContext(k),{uiState:r,closeModal:n,openModal:l,selectCategory:i,selectProduct:o,setOrderId:c}=z({selectedCategory:"all"}),{checkAuthAndProceed:d,handlePhoneVerification:m,handleLocationUpdate:x,isLoading:u,isAuthenticated:h,userInfo:p}=L(),{products:b,loading:g,loadMore:f,updateFilters:j,setPage:y,totalPages:N}=T({}),{slides:w,loading:S}=C(),{handleCategorySelect:P}=M({updateFilters:j,setPage:y,selectCategory:i}),I=e.useCallback(()=>{l("showProfile")},[l]),A=e.useCallback(()=>{h?d({requiresAuth:!0,requiresAddress:!0,onSuccess:()=>l("showOrders"),onNoAddress:()=>l("showLocation")}):l("showLogin")},[d,h,l]),O=e.useCallback(()=>{l(h?"showFavorites":"showLogin")},[h,l]),F=e.useCallback(()=>{a(!0)},[a]),V=e.useCallback(e=>{o(e)},[o]),$=e.useCallback(e=>{c(e)},[c]),U=e.useCallback(e=>{n(e)},[n]),Q=e.useCallback(async e=>{try{(await m(e)).success&&n("showLogin")}catch{}},[m,n]),X=e.useCallback(async e=>{try{(await x(e)).success&&n("showLocation")}catch{}},[x,n]);return e.useEffect(()=>{if(t&&b.length>0){const e=b.find(e=>e.code===t);e&&o(e)}},[t,b,o]),s.jsxs("div",{className:"min-h-screen bg-white bg-mesh-gradient relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-animated-dots"}),s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-primary-100/8 to-secondary-100/4 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-float"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-tl from-secondary-100/6 to-primary-100/4 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 animate-float",style:{animationDelay:"2s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-gradient-to-r from-primary-50/10 to-secondary-50/6 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2 animate-float",style:{animationDelay:"4s"}}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(v,{position:"top-center",toastOptions:{className:"bg-white/95 backdrop-blur-xl border border-neutral-200/50 rounded-2xl px-6 py-4 shadow-lg",duration:3e3,style:{color:"#1e293b",fontSize:"14px",fontWeight:"500"}}}),s.jsx("header",{children:s.jsx(R,{onOrdersClick:A,onProfileClick:I})}),s.jsx("nav",{className:"sticky top-0 z-20",children:s.jsx(J,{selectedCategory:r.selectedCategory,onSelect:P})}),s.jsxs("main",{className:"pb-24 relative",children:[s.jsx("div",{className:"p-4 pt-2 pb-2",children:s.jsx(B,{slides:w,loading:S,onSelect:V})}),s.jsx(q,{products:b,productsLoading:g,selectedCategory:r.selectedCategory,totalPages:N,loadMore:f,onProductSelect:V,checkAuthAndProceed:d,updateFilters:j,setPage:y,setSelectedCategory:i})]}),s.jsx(D,{onFavoritesClick:O,onCartClick:F}),s.jsx(Z,{onOrderCreated:$,checkAuthAndProceed:d,openModal:l}),s.jsx(E,{uiState:r,userInfo:p,isLoading:u,onCloseModal:U,onPhoneVerification:Q,onLocationUpdate:X,onProductSelect:V,checkAuthAndProceed:d})]})]})};K.propTypes={productCode:N.string};const Y=({productCode:e})=>s.jsx(I,{children:s.jsx(A,{children:s.jsx(K,{productCode:e})})});Y.propTypes={productCode:N.string};export{Y as default};
