import{r as e,R as t,j as s,C as a,a as r,W as l,P as n,S as i,U as o,b as d,c,d as u,e as x,T as m,L as h,X as p,f as b,g,h as j,B as v,i as f,G as N,k as y,l as w,m as C,A as k,n as S,o as P,p as E,q as $,s as D,t as z,u as L,v as U,M as O,w as I,x as F,y as R,z as T,D as q,Y as A,E as G,F as B,H as _,I as M,J as V,K as J,N as W,O as K,Q as H,V as Q,Z as X,_ as Y,$ as Z,a0 as ee,a1 as te,a2 as se}from"./vendor-react-BJ-jiNb_.js";import{E as ae}from"./components-ByS-VOv1.js";import"./hooks-CiPcQEk5.js";const re="https://shozati.pythonanywhere.com/api",le=()=>{const[t,s]=e.useState(null),[a,r]=e.useState(!1),[l,n]=e.useState(!1),[i,o]=e.useState(!1),[d,c]=e.useState(null),[u,x]=e.useState(null);e.useRef(null);const m=async()=>{o(!0),x(null);try{const e=await fetch(`${re}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone:"0000000000"})});if(!e.ok){const t=await e.json().catch(()=>({message:"Authentication failed"}));throw new Error(`Admin authentication failed: ${t.message||"Invalid admin credentials"}`)}const t=await e.json();return s(t.token),localStorage.setItem("adminToken",t.token),t}catch(e){throw x(e.message),e}finally{o(!1)}},h=e.useCallback(()=>{localStorage.removeItem("adminToken"),s(null),r(!1)},[]);e.useEffect(()=>{(async()=>{if(!a)try{const t=localStorage.getItem("adminToken");if(t&&"admin_dev_token_123123"!==t)s(t),r(!0);else try{await m(),r(!0)}catch(e){s(null),r(!0)}}catch(t){localStorage.removeItem("adminToken"),s(null),r(!0)}})()},[a]),e.useEffect(()=>{t&&!a&&r(!0)},[t,a]);const p=e.useCallback(async(e,s={})=>{const r=async t=>{let a={Authorization:`Bearer ${t}`,...s.headers};s.body instanceof FormData||(a["Content-Type"]="application/json");const r=await fetch(`${re}${e}`,{...s,headers:a});if(!r.ok)throw await r.text(),new Error(`HTTP ${r.status}: ${r.statusText}`);const l=r.headers.get("content-type");return l&&l.includes("application/json")?await r.json():await r.text()};try{if(!t){if(!a)throw new Error("Authentication not initialized yet");throw new Error("No authentication token available")}return await r(t)}catch(l){if("AbortError"===l.name)return null;if(l.message.includes("Token")||l.message.includes("401")||l.message.includes("UNAUTHORIZED")||l.message.includes("No authentication token"))try{const e=await m();return await r(e.token)}catch(n){throw new Error("Re-authentication failed")}throw l}},[t,a]);return{token:t,isInitialized:a,loading:l,isAuthenticating:i,error:d,authError:u,setLoading:n,setError:c,login:async()=>{try{return await m(),!0}catch(e){return!1}},logout:h,apiCall:p}},ne=(t={})=>{const[s,a]=e.useState([]),[r,l]=e.useState(null),[n,i]=e.useState(0),[o,d]=e.useState(0),[c,u]=e.useState({}),[x,m]=e.useState(1),[h]=e.useState(t.perPage||150),[p,b]=e.useState({category:"all",search:"",minPrice:null,maxPrice:null,size:"",color:"",code:t.initialFilters?.code||"",sort:""}),[g,j]=e.useState({isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isUploadingImages:!1}),[v,f]=e.useState({fetchError:null,createError:null,updateError:null,deleteError:null,uploadError:null}),{apiCall:N}=le(),y=e.useRef(null),w=e.useRef(new Map);e.useRef([]);const C=e.useCallback((e,t)=>{j(s=>({...s,[e]:t}))},[]),k=e.useCallback((e,t)=>{f(s=>({...s,[e]:t}))},[]),S=e.useCallback(()=>{w.current.clear()},[]),P=e.useCallback(async(e=x,t=p)=>{y.current&&y.current.abort(),y.current=new AbortController,C("isLoading",!0),k("fetchError",null);const s=JSON.stringify({page:e,...t});try{if(w.current.has(s)){const e=w.current.get(s);return a(e.products),i(e.total),d(e.pages),e}const r=new URLSearchParams({page:e,perPage:h,..."all"!==t.category&&{category:t.category},...t.search&&{search:t.search},...t.minPrice&&{minPrice:t.minPrice},...t.maxPrice&&{maxPrice:t.maxPrice},...t.size&&{size:t.size},...t.color&&{color:t.color},...t.code&&{code:t.code},sort:t.sort}),n=await N(`/admin/products?${r}`,{signal:y.current.signal});if(n)return a(n.products),i(n.total),d(n.pages),w.current.set(s,n),n;t.code&&1===n.products.length&&l(n.products[0])}catch(r){if("AbortError"===r.name)return;return k("fetchError",r.message),null}finally{C("isLoading",!1)}},[N,p,x,h,k,C]),E=e.useCallback(async(e,t,s,a)=>{C("isUploadingImages",!0),k("uploadError",null);try{const r=[];for(let l=0;l<s.length;l++){const n=new FormData;n.append("productCode",e),n.append("colorName",t),n.append("image",s[l]);const i=await N("/admin/products/upload-images",{method:"POST",body:n,headers:{},onUploadProgress:e=>{const t=e.loaded/e.total*100;a?.(l/s.length*100+t/s.length)}});i?.imageUrls?.[0]&&r.push(i.imageUrls[0])}return r}catch(r){return k("uploadError",r.message),[]}finally{C("isUploadingImages",!1)}},[N,k,C]),$=e.useCallback(async(e,t)=>{C("isCreating",!0),k("createError",null);try{const s=await N("/admin/products",{method:"POST",body:JSON.stringify({...e,variants:e.variants.map(e=>({...e,images:[]}))})});if(!s)throw new Error("Failed to create product");const a=await Promise.all(e.variants.map(async(e,a)=>{if(!t[a]?.length)return e;const r=await E(s.code,e.colorName,t[a],e=>{u(t=>({...t,[`${a}`]:e}))});return{...e,images:r}})),r=await N(`/admin/products/${s.id}`,{method:"PUT",body:JSON.stringify({...e,variants:a})});return w.current.clear(),await P(),r}catch(s){return k("createError",s.message),null}finally{C("isCreating",!1),u({})}},[N,P,k,C,E]),D=e.useCallback(async(e,t,s)=>{C("isUpdating",!0),k("updateError",null);try{const a=await Promise.all(t.variants.map(async(e,a)=>{if(!s[a]?.length)return e;const r=await E(t.code,e.colorName,s[a],e=>{u(t=>({...t,[`${a}`]:e}))});return{...e,images:[...e.images,...r]}})),r=await N(`/admin/products/${e}`,{method:"PUT",body:JSON.stringify({...t,variants:a})});return r&&(w.current.clear(),await P()),r}catch(a){return k("updateError",a.message),null}finally{C("isUpdating",!1),u({})}},[N,P,k,C,E]),z=e.useCallback(async e=>{C("isDeleting",!0),k("deleteError",null);try{const t=await N(`/admin/products/${e}`,{method:"DELETE"});return t&&(S(),await P()),t}catch(t){return k("deleteError",t.message),null}finally{C("isDeleting",!1)}},[N,S,P,k,C]),L=e.useCallback(async(e,t)=>{C("isUpdating",!0),k("updateError",null);try{const s=await N(`/admin/products/${e}/inventory`,{method:"PUT",body:JSON.stringify(t)});return s&&(S(),await P()),s}catch(s){return k("updateError",s.message),null}finally{C("isUpdating",!1)}},[N,S,P,k,C]),U=e.useCallback(e=>{b(t=>{const s={...t,...e};return JSON.stringify(t)!==JSON.stringify(s)&&m(1),s})},[]),O=e.useCallback(()=>{x<o&&m(e=>e+1)},[x,o]),I=e.useCallback(()=>{x>1&&m(e=>e-1)},[x]);return e.useEffect(()=>(P(),()=>{y.current&&y.current.abort()}),[P,x,p]),e.useEffect(()=>()=>{S(),y.current&&y.current.abort()},[S]),{products:s,selectedProduct:r,totalProducts:n,totalPages:o,page:x,perPage:h,filters:p,...g,...v,setSelectedProduct:l,setPage:m,updateFilters:U,fetchProducts:P,createProduct:$,updateProduct:D,deleteProduct:z,updateInventory:L,uploadProgress:c,uploadProductImages:E,nextPage:O,previousPage:I,clearCache:S}},ie=({children:e,className:t="",variant:a="default",padding:r="lg",hover:l=!0,...n})=>{const i=l?"hover:bg-neutral-850/70 hover:border-neutral-600/50 hover:shadow-xl hover:shadow-black/10":"";return s.jsx("div",{className:`\n        relative overflow-hidden rounded-xl md:rounded-2xl border\n        backdrop-blur-xl transition-all duration-300\n        ${{default:"bg-neutral-850/50 border-neutral-700/50",elevated:"bg-neutral-850/70 border-neutral-700/70 shadow-xl shadow-black/20",outline:"bg-transparent border-neutral-700/50",glass:"bg-neutral-850/30 border-neutral-700/30 backdrop-blur-xl"}[a]}\n        ${{sm:"p-3",md:"p-4",lg:"p-4 md:p-6",xl:"p-6 md:p-8"}[r]}\n        ${i}\n        ${t}\n      `,dir:"rtl",...n,children:e})},oe=({children:e,variant:t="primary",size:a="md",fullWidth:r=!1,disabled:l=!1,loading:n=!1,className:i="",...o})=>s.jsxs("button",{className:`\n        inline-flex items-center justify-center gap-2 rounded-xl\n        border font-medium transition-all duration-300\n        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-neutral-900\n        disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-current\n        ${{primary:"\n      bg-primary-500 text-white border-primary-500\n      hover:bg-primary-600 hover:border-primary-600\n      focus:ring-primary-500/50\n    ",secondary:"\n      bg-neutral-800/50 text-neutral-300 border-neutral-700/50\n      hover:bg-neutral-700/50 hover:border-neutral-600/50 hover:text-white\n      focus:ring-neutral-500/50\n    ",success:"\n      bg-success-500 text-white border-success-500\n      hover:bg-success-600 hover:border-success-600\n      focus:ring-success-500/50\n    ",warning:"\n      bg-warning-500 text-white border-warning-500\n      hover:bg-warning-600 hover:border-warning-600\n      focus:ring-warning-500/50\n    ",danger:"\n      bg-danger-500 text-white border-danger-500\n      hover:bg-danger-600 hover:border-danger-600\n      focus:ring-danger-500/50\n    ",ghost:"\n      bg-transparent text-neutral-400 border-transparent\n      hover:bg-neutral-800/50 hover:text-white hover:border-neutral-700/50\n      focus:ring-neutral-500/50\n    ",outline:"\n      bg-transparent text-primary-400 border-primary-500/50\n      hover:bg-primary-500/10 hover:border-primary-500 hover:text-primary-300\n      focus:ring-primary-500/50\n    "}[t]}\n        ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[a]}\n        ${r?"w-full":""}\n        ${i}\n      `,disabled:l||n,dir:"rtl",...o,children:[n&&s.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),e]}),de=t.forwardRef(({label:e,error:t,hint:r,type:l="text",size:n="md",fullWidth:i=!0,className:o="",...d},c)=>s.jsxs("div",{className:"space-y-2 "+(i?"w-full":""),children:[e&&s.jsx("label",{className:"block text-sm font-medium text-neutral-300",children:e}),s.jsx("input",{ref:c,type:l,className:`\n          w-full rounded-xl border backdrop-blur-sm transition-all duration-300\n          !bg-neutral-800/70 !text-white placeholder:!text-neutral-400\n          ${t?"!border-danger-500/50 focus:!border-danger-500 focus:ring-danger-500/20":"!border-neutral-700/50 focus:!border-primary-500/50 focus:ring-primary-500/20"}\n          focus:outline-none focus:ring-2\n          ${{sm:"h-10 px-3 text-sm",md:"h-12 px-4 text-sm",lg:"h-14 px-5 text-base"}[n]}\n          ${"color"===l?"p-1 !bg-transparent":""}\n          ${o}\n        `,style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},dir:"rtl",...d}),r&&!t&&s.jsx("p",{className:"text-xs text-neutral-500",children:r}),t&&s.jsxs("div",{className:"flex items-center gap-2 text-danger-400 text-sm",children:[s.jsx(a,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:t})]})]}));de.displayName="AdminInput";const ce=({title:e,value:t,icon:a,color:r="primary",trend:l,subtitle:n})=>{const i={primary:{bg:"bg-primary-500/10",text:"text-primary-400",border:"border-primary-500/20",iconBg:"bg-primary-500/20"},success:{bg:"bg-success-500/10",text:"text-success-400",border:"border-success-500/20",iconBg:"bg-success-500/20"},warning:{bg:"bg-warning-500/10",text:"text-warning-400",border:"border-warning-500/20",iconBg:"bg-warning-500/20"},danger:{bg:"bg-danger-500/10",text:"text-danger-400",border:"border-danger-500/20",iconBg:"bg-danger-500/20"},neutral:{bg:"bg-neutral-500/10",text:"text-neutral-400",border:"border-neutral-500/20",iconBg:"bg-neutral-500/20"}}[r];return s.jsx(ie,{className:`${i.border} ${i.bg} hover:shadow-lg hover:shadow-black/20`,variant:"glass",padding:"md",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",dir:"rtl",children:[s.jsx("h3",{className:"text-xs font-medium text-neutral-400 mb-1 leading-tight truncate",children:e}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:`text-lg font-bold ${i.text} leading-none`,children:t}),n&&s.jsx("span",{className:"text-xs text-neutral-500",children:n})]}),void 0!==l&&s.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium\n                          "+(l>=0?"bg-success-500/10 border border-success-500/20 text-success-400":"bg-danger-500/10 border border-danger-500/20 text-danger-400"),children:[s.jsx("span",{children:l>=0?"↗":"↘"}),s.jsxs("span",{children:[Math.abs(l).toFixed(1),"%"]})]})]}),s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${i.iconBg} flex-shrink-0`,children:s.jsx(a,{className:`w-4 h-4 ${i.text}`})})]})})},ue=()=>{const{analytics:t,isLoading:a,isRefreshing:h,error:p,refreshAnalytics:b}=(()=>{const[t,s]=e.useState({totalSales:0,orderCount:0,topProducts:[],revenueChart:[]}),[a,r]=e.useState("week"),[l,n]=e.useState({startDate:null,endDate:null}),[i,o]=e.useState(!1),[d,c]=e.useState(!1),[u,x]=e.useState(null),{apiCall:m}=le(),h=e.useRef(null),p=e.useRef(!0),b=e.useCallback(async(e=a)=>{o(!0),x(null);try{const t=new URLSearchParams({period:e,...l.startDate&&{startDate:l.startDate.toISOString()},...l.endDate&&{endDate:l.endDate.toISOString()}}).toString(),a=await m(`/admin/analytics/dashboard?${t}`);return a&&s(a),a}catch(t){return x(t.message),null}finally{o(!1)}},[m,a,l]),g=e.useCallback(async()=>{if(!d){c(!0);try{await b()}finally{c(!1)}}},[b,d]),j=e.useCallback(e=>{p.current=e,!e&&h.current?(clearInterval(h.current),h.current=null):e&&!h.current&&(h.current=setInterval(g,3e5))},[g]),v=e.useCallback((e,t=null)=>{r(e),t&&n(t)},[]);return e.useEffect(()=>(p.current&&(h.current=setInterval(g,3e5)),b(),()=>{h.current&&clearInterval(h.current)}),[b,g]),e.useEffect(()=>{h.current&&clearInterval(h.current),p.current&&(h.current=setInterval(g,3e5))},[a,g]),{analytics:t,period:a,customDateRange:l,isLoading:i,isRefreshing:d,error:u,loadAnalytics:b,refreshAnalytics:g,toggleAutoRefresh:j,updatePeriod:v,setCustomDateRange:n}})(),g=e.useMemo(()=>{if(!t)return{revenue:{current:0,growth:0,color:"emerald"},orders:{current:0,growth:0,color:"blue"},avgOrderValue:{current:0,growth:0,color:"blue"},customerRetention:{current:0,growth:0,color:"purple"}};const e=(e,t)=>0===t?0:(e-t)/t*100,s=t.orderCount>0?t.totalSales/t.orderCount:0,a=t.retention?.rate||0;return{revenue:{current:t.totalSales||0,growth:e(t.revenueChart?.[t.revenueChart.length-1]?.revenue||0,t.revenueChart?.[t.revenueChart.length-2]?.revenue||0),color:"emerald"},orders:{current:t.orderCount||0,growth:e(t.orderCount||0,t.previousOrderCount||0),color:"blue"},avgOrderValue:{current:s,growth:e(s,t.previousAvgOrderValue||0),color:"blue"},customerRetention:{current:a,growth:e(a,t.retention?.previousRate||0),color:"purple"}}},[t]),j=e.useMemo(()=>{if(!t?.ordersByStatus)return[];const e={pending:"#0ea5e9",processing:"#60A5FA",delivered:"#34D399",cancelled:"#F87171"};return Object.entries(t.ordersByStatus).map(([t,s])=>({status:t,count:s,color:e[t]}))},[t?.ordersByStatus]);return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",dir:"rtl",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",children:"التحليلات"}),s.jsxs(oe,{onClick:b,disabled:h,variant:"outline",loading:h,size:"sm",children:[s.jsx(r,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"تحديث"})]})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"التحليلات"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"تحليل الأداء والإحصائيات المالية"})]}),s.jsxs(oe,{onClick:b,disabled:h,variant:"outline",loading:h,size:"md",children:[s.jsx(r,{className:"w-4 h-4"}),s.jsx("span",{children:"تحديث البيانات"})]})]})}),s.jsx("div",{className:"p-4 md:p-6",children:a?s.jsx(pe,{}):p?s.jsx(be,{error:p,onRetry:b}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsx(ce,{title:"إجمالي المبيعات",value:`${(g?.revenue?.current||0).toLocaleString("ar-EG")} ج.م`,icon:l,color:"success",trend:g?.revenue?.growth||0}),s.jsx(ce,{title:"عدد الطلبات",value:g?.orders?.current||0,icon:n,color:"primary",trend:g?.orders?.growth||0}),s.jsx(ce,{title:"متوسط قيمة الطلب",value:`${(g?.avgOrderValue?.current||0).toLocaleString("ar-EG")} ج.م`,icon:i,color:"warning",trend:g?.avgOrderValue?.growth||0}),s.jsx(ce,{title:"معدل الاحتفاظ بالعملاء",value:`${(g?.customerRetention?.current||0).toFixed(1)}%`,icon:o,color:"neutral",trend:g?.customerRetention?.growth||0})]}),s.jsx(me,{products:t.topProducts}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:s.jsx(xe,{title:"توزيع حالات الطلبات",icon:n,color:"primary",chart:j.length>0?s.jsx("div",{className:"flex items-center justify-center h-[200px] md:h-[250px] bg-neutral-800/30 rounded-xl",children:s.jsx(d,{width:"100%",height:"100%",children:s.jsxs(c,{children:[s.jsx(u,{data:j,dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:window.innerWidth<768?70:90,innerRadius:window.innerWidth<768?40:50,paddingAngle:5,children:j.map((e,t)=>s.jsx(x,{fill:e.color},t))}),s.jsx(m,{content:s.jsx(he,{})})]})})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] md:h-[250px] bg-gradient-to-br from-neutral-800/80 to-neutral-800/60 rounded-xl border border-neutral-700/50",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-700/50 flex items-center justify-center mb-4",children:s.jsx(n,{className:"w-8 h-8 text-neutral-400"})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-primary-500/20 border border-primary-500/30"})]}),s.jsx("h3",{className:"text-white font-medium mb-1",children:"لا توجد طلبات بعد"}),s.jsx("p",{className:"text-neutral-500 text-xs text-center max-w-48 leading-relaxed",children:"سيتم عرض إحصائيات الطلبات هنا عند توفر البيانات"})]}),footer:j.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2 md:gap-3 mt-3 md:mt-4",children:j.map(({status:e,count:t,color:a})=>s.jsxs("div",{className:"flex items-center gap-2",dir:"rtl",children:[s.jsx("span",{className:"text-xs font-bold text-white ml-auto",children:t}),s.jsx("span",{className:"text-xs text-neutral-400 truncate",children:ge(e)}),s.jsx("div",{className:"w-2 h-2 md:w-3 md:h-3 rounded-full flex-shrink-0",style:{backgroundColor:a}})]},e))}):null})})]})})]})},xe=({title:e,chart:t,footer:a,icon:r,color:l="primary"})=>s.jsxs(ie,{variant:"glass",padding:"md",children:[s.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white mb-4 md:mb-6 flex items-center justify-between",dir:"rtl",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r&&s.jsx(r,{className:"w-5 h-5 text-white"}),e]}),s.jsx("div",{className:`w-3 h-3 rounded-full ${{primary:"bg-primary-400",success:"bg-success-400",warning:"bg-warning-400",danger:"bg-danger-400",neutral:"bg-neutral-400"}[l]}`})]}),t,a]}),me=({products:e})=>s.jsxs(ie,{variant:"glass",padding:"md",children:[s.jsxs("h3",{className:"text-base md:text-lg font-bold text-white mb-3 md:mb-4 flex items-center justify-between",dir:"rtl",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsx(n,{className:"w-5 h-5 text-white"}),"أفضل المنتجات مبيعاً"]}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-success-400"})]}),s.jsx("div",{className:"space-y-2 md:space-y-3",children:e&&e.length>0?e.map((e,t)=>s.jsx(ie,{variant:"default",padding:"sm",className:"hover:border-primary-500/30",children:s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 \n                             flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs md:text-sm font-bold text-white",children:["#",t+1]})}),s.jsxs("div",{className:"flex-1 min-w-0",dir:"rtl",children:[s.jsx("h4",{className:"font-bold text-white truncate mb-1 text-xs md:text-sm",children:e.name}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(n,{className:"w-3 h-3 text-neutral-400"}),s.jsxs("span",{className:"text-xs text-neutral-400",children:[e.quantity||0," قطعة"]})]}),s.jsxs("span",{className:"text-primary-400 font-bold text-xs md:text-sm",children:[(e.revenue||0).toLocaleString("ar-EG")," جنيه"]})]})]})]})},e.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(n,{className:"w-12 h-12 text-neutral-500 mx-auto mb-3"}),s.jsx("p",{className:"text-neutral-400 text-sm",children:"لا توجد منتجات مبيعة بعد"})]})})]}),he=({active:e,payload:t,label:a})=>e&&t?.length?s.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-3 backdrop-blur-xl",children:[a&&s.jsx("p",{className:"text-neutral-400 mb-2 text-sm",children:a}),t.map((e,t)=>s.jsxs("p",{className:"text-white text-sm",children:["number"==typeof e.value?e.value.toLocaleString("ar-EG"):e.value,"revenue"===e.name?" جنيه":""]},t))]}):null,pe=()=>s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs(ie,{variant:"glass",padding:"lg",className:"text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"w-12 h-12 text-primary-400 animate-spin mx-auto"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-500/20 animate-ping"})]}),s.jsx("p",{className:"text-neutral-300 font-medium mt-4",children:"جاري تحميل البيانات..."})]})}),be=({error:e,onRetry:t})=>s.jsx("div",{className:"text-center py-12",children:s.jsxs(ie,{variant:"glass",padding:"lg",className:"inline-block max-w-md",children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(a,{className:"w-16 h-16 text-danger-400 mx-auto"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-danger-500/20 animate-pulse"})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"عذراً، حدث خطأ ما"}),s.jsx("p",{className:"text-neutral-400 mb-6 leading-relaxed",children:e}),s.jsx(oe,{onClick:t,variant:"primary",size:"md",children:"إعادة المحاولة"})]})}),ge=e=>{switch(e){case"pending":return"معلق";case"processing":return"قيد التنفيذ";case"delivered":return"تم التسليم";case"cancelled":return"ملغي";default:return"غير معروف"}},je=({variant:t,variantIndex:r,onImageUpload:l,onImageRemove:n,isUploading:i=!1,uploadProgress:o={},error:d=null})=>{const c=o[r]||0,u=e.useCallback(e=>{const t=Array.from(e.target.files);t.length>0&&l(r,t),e.target.value=""},[l,r]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-300",children:["صور ",t.colorName]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2",children:[t.images?.map((e,a)=>s.jsxs("div",{className:"relative flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden group",children:[s.jsx("img",{src:e,alt:`${t.colorName} - ${a+1}`,className:"w-full h-full object-cover transition-transform \n                       group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 \n                          to-transparent opacity-0 group-hover:opacity-100 \n                          transition-opacity"}),s.jsx("button",{type:"button",onClick:()=>n(r,a),className:"absolute top-1 right-1 p-1.5 bg-black/50 rounded-lg\n                       opacity-0 group-hover:opacity-100 transition-opacity\n                       hover:bg-red-500/20",children:s.jsx(p,{className:"w-4 h-4 text-white group-hover:text-red-500"})})]},a)),s.jsxs("label",{className:"relative flex-shrink-0 w-24 h-24 flex items-center \n                    justify-center rounded-xl cursor-pointer group \n                    transition-all duration-300 border-2 border-dashed\n                    "+(i?"bg-blue-500/10 border-blue-500/30":"bg-gray-800/50 border-gray-700 hover:border-blue-500"),children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:u,disabled:i}),i&&c>0?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12",viewBox:"0 0 36 36",children:s.jsx("path",{d:"M18 2.0845\n                    a 15.9155 15.9155 0 0 1 0 31.831\n                    a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${c}, 100`,className:"text-blue-500"})})}):s.jsx(b,{className:"w-6 h-6 transition-colors duration-300\n                      "+(i?"text-blue-500 animate-pulse":"text-gray-400 group-hover:text-blue-500")})]})]}),d&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("p",{children:d})]})]})};if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  .hide-scrollbar {\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n  }\n  .hide-scrollbar::-webkit-scrollbar {\n    display: none;  /* Safari and Chrome */\n  }\n",document.head.appendChild(e)}const ve=({isOpen:t,onClose:a,title:r,children:l,size:n="default",showCloseButton:i=!0,showHandle:o=!0,className:d="",maxHeight:c="90vh"})=>{const u=e.useRef(null);return e.useEffect(()=>(t?(document.body.style.overflow="hidden",u.current&&u.current.focus()):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&a()};if(t)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]),t?s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:a}),s.jsx("div",{className:"fixed inset-x-0 bottom-0 transform transition-transform duration-300 ease-out",children:s.jsxs("div",{ref:u,className:`\n            bg-gradient-to-b from-neutral-950/95 to-neutral-950 backdrop-blur-xl\n            rounded-t-[2.5rem] border-t border-neutral-800/50 shadow-2xl\n            ${{small:"max-h-[60vh]",default:"max-h-[90vh]",large:"max-h-[95vh]",full:"h-screen"}[n]} overflow-y-auto hide-scrollbar\n            ${d}\n          `,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":r?"sheet-title":void 0,children:[o&&s.jsx("div",{className:"flex justify-center pt-3 pb-1",children:s.jsx("div",{className:"w-12 h-1 rounded-full bg-neutral-700/50"})}),r&&s.jsxs("div",{className:"flex items-center justify-between px-4 md:px-6 py-4 border-b border-neutral-800/50",children:[s.jsx("h2",{id:"sheet-title",className:"text-lg md:text-xl font-bold text-white",dir:"rtl",children:r}),i&&s.jsx("button",{onClick:a,className:"p-2 rounded-xl hover:bg-neutral-800/50 transition-colors","aria-label":"إغلاق",children:s.jsx(p,{className:"w-5 h-5 text-neutral-400"})})]}),s.jsx("div",{className:"px-4 md:px-6 py-4 md:py-6",children:l})]})})]}):null},fe=({isOpen:t,onClose:a,title:r,children:l,size:n="md",className:i=""})=>{const o=e.useRef(null);return e.useEffect(()=>(t?(document.body.style.overflow="hidden",o.current&&o.current.focus()):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&a()};if(t)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]),t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 md:p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),s.jsxs("div",{ref:o,className:`\n          relative bg-neutral-900 rounded-xl md:rounded-2xl border border-neutral-700/50\n          w-full ${{sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-full mx-4"}[n]} max-h-[95vh] overflow-y-auto backdrop-blur-xl hide-scrollbar\n          ${i}\n        `,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":r?"modal-title":void 0,dir:"rtl",children:[r&&s.jsxs("div",{className:"sticky top-0 bg-neutral-900 border-b border-neutral-800/50 px-4 md:px-6 py-4 flex items-center justify-between z-10",children:[s.jsx("h2",{id:"modal-title",className:"text-lg md:text-xl font-bold text-white",children:r}),s.jsx("button",{onClick:a,className:"p-2 hover:bg-neutral-800/50 rounded-xl transition-colors","aria-label":"إغلاق",children:s.jsx(p,{className:"w-5 h-5 text-neutral-400"})})]}),s.jsx("div",{className:"p-4 md:p-6",children:l})]})]}):null},Ne=({label:e,children:t,error:a,hint:r,required:l=!1,className:n=""})=>s.jsxs("div",{className:`space-y-2 ${n}`,children:[e&&s.jsxs("label",{className:"block text-sm font-medium text-neutral-400",children:[e,l&&s.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),t,r&&s.jsx("p",{className:"text-xs text-neutral-500",children:r}),a&&s.jsx("p",{className:"text-sm text-red-500",children:a})]}),ye=({type:e="text",name:t,value:a,onChange:r,placeholder:l,error:n,hint:i,required:o=!1,className:d="",...c})=>s.jsx(Ne,{label:t,error:n,hint:i,required:o,children:s.jsx("input",{type:e,value:a||"",onChange:r,placeholder:l,className:`\n          w-full h-12 px-4 rounded-xl !text-white placeholder:!text-neutral-500\n          !bg-neutral-800/70 !border-neutral-700/50 \n          focus:!border-blue-500/50 focus:ring-2 focus:ring-blue-500/20\n          transition-all duration-200\n          ${n?"!border-red-500/50":""}\n          ${d}\n        `,style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},...c})}),we=({name:e,value:t,onChange:a,options:r=[],placeholder:l="اختر...",error:n,hint:i,required:o=!1,className:d="",...c})=>s.jsx(Ne,{label:e,error:n,hint:i,required:o,children:s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:t||"",onChange:a,className:`\n          w-full h-12 px-4 pr-10 rounded-xl !text-white\n          !bg-neutral-800/70 !border-neutral-700/50 \n          focus:!border-blue-500/50 focus:ring-2 focus:ring-blue-500/20\n          transition-all duration-200 appearance-none\n          ${n?"!border-red-500/50":""}\n          ${d}\n        `,style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},...c,children:[s.jsx("option",{value:"",disabled:!0,children:l}),r.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]}),s.jsx(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 pointer-events-none"})]})}),Ce=({name:e,value:t,onChange:a,placeholder:r,error:l,hint:n,required:i=!1,rows:o=4,className:d="",...c})=>s.jsx(Ne,{label:e,error:l,hint:n,required:i,children:s.jsx("textarea",{value:t||"",onChange:a,placeholder:r,rows:o,className:`\n          w-full px-4 py-3 rounded-xl !text-white placeholder:!text-neutral-500\n          !bg-neutral-800/70 !border-neutral-700/50 \n          focus:!border-blue-500/50 focus:ring-2 focus:ring-blue-500/20\n          transition-all duration-200 resize-none\n          ${l?"!border-red-500/50":""}\n          ${d}\n        `,style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},...c})}),ke=({children:e,className:t="",direction:a="row"})=>s.jsx("div",{className:`\n      flex gap-3 ${"column"===a?"flex-col":"flex-col sm:flex-row"}\n      sm:justify-end\n      ${t}\n    `,children:e}),Se=({children:e,cols:t=1,className:a=""})=>s.jsx("div",{className:`grid ${{1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"}[t]} gap-4 ${a}`,children:e}),Pe=(e,t="")=>null==e||""===e?t:e,Ee=[{label:"أسود",value:"black",code:"#000000"},{label:"أبيض",value:"white",code:"#FFFFFF"},{label:"أحمر",value:"red",code:"#FF0000"},{label:"أخضر",value:"green",code:"#008000"},{label:"أزرق",value:"blue",code:"#0000FF"},{label:"أزرق فاتح",value:"lightblue",code:"#0ea5e9"},{label:"برتقالي",value:"orange",code:"#FFA500"},{label:"بنفسجي",value:"purple",code:"#800080"},{label:"وردي",value:"pink",code:"#FFC0CB"},{label:"رمادي",value:"gray",code:"#808080"},{label:"بني",value:"brown",code:"#A52A2A"},{label:"أزرق سماوي",value:"skyblue",code:"#38bdf8"},{label:"فضي",value:"silver",code:"#C0C0C0"}],$e=()=>{const{products:a,filters:r,isLoading:l,isDeleting:n,error:i,deleteError:o,fetchProducts:d,createProduct:c,updateProduct:u,deleteProduct:x,uploadProductImages:m,updateFilters:h}=ne(),[b,g]=e.useState("list"),[C,k]=e.useState(null),[P,E]=e.useState(!1),[$,D]=e.useState(!1),[z,L]=e.useState(!1),U=t.useMemo(()=>a?.length?a.reduce((e,t)=>(e.total++,"active"===t.status&&e.active++,t.variants.some(e=>e.sizes.every(e=>!e.inStock))&&e.outOfStock++,e.revenue+=t.salesCount*t.basePrice,e),{total:0,active:0,outOfStock:0,revenue:0}):{total:0,active:0,outOfStock:0,revenue:0},[a]),O=e=>{h({search:e})};return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",dir:"rtl",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",children:"المنتجات"}),s.jsx(oe,{onClick:()=>E(!0),variant:"primary",size:"sm",children:s.jsx(j,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"إدارة المنتجات"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"إضافة وتعديل وإدارة منتجات المتجر"})]}),s.jsxs(oe,{onClick:()=>E(!0),variant:"primary",size:"md",children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:"إضافة منتج جديد"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6 grid grid-cols-2 gap-3 md:gap-6",children:[s.jsx(ce,{title:"إجمالي المنتجات",value:U.total,icon:v,color:"primary"}),s.jsx(ce,{title:"منتجات نشطة",value:U.active,icon:f,color:"success"})]}),s.jsxs("div",{className:"sticky top-0 md:top-16 z-30 bg-neutral-950/95 backdrop-blur-xl p-4 md:p-6 \n                     space-y-4 md:space-y-6 border-b border-neutral-800/50 shadow-2xl shadow-black/20",children:[s.jsxs("div",{className:"hidden md:flex items-center justify-between gap-4",children:[s.jsxs(oe,{onClick:()=>E(!0),variant:"primary",children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:"إضافة منتج"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oe,{onClick:()=>g("grid"),variant:"grid"===b?"primary":"secondary",size:"sm",children:s.jsx(N,{className:"w-5 h-5"})}),s.jsx(oe,{onClick:()=>g("list"),variant:"list"===b?"primary":"secondary",size:"sm",children:s.jsx(y,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(de,{value:r.search,onChange:e=>O(e.target.value),placeholder:"",hint:"ابحث عن منتج..."}),s.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 pointer-events-none"}),r.search&&s.jsx("button",{onClick:()=>O(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full\n                       hover:bg-neutral-700/50 transition-colors",children:s.jsx(p,{className:"w-4 h-4 text-neutral-400"})})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar py-2",children:Fe.map(e=>s.jsxs(oe,{onClick:()=>(e=>{h({category:e})})(e.id),variant:r.category===e.id?"primary":"ghost",size:"sm",className:"whitespace-nowrap",children:[s.jsx(e.icon,{className:"w-4 h-4"}),s.jsx("span",{children:e.label})]},e.id))}),s.jsxs("div",{className:"md:hidden flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-neutral-400",children:[a?.length||0," منتج"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oe,{onClick:()=>g("grid"),variant:"grid"===b?"primary":"secondary",size:"sm",children:s.jsx(N,{className:"w-5 h-5"})}),s.jsx(oe,{onClick:()=>g("list"),variant:"list"===b?"primary":"secondary",size:"sm",children:s.jsx(y,{className:"w-5 h-5"})})]})]})]}),s.jsx("div",{className:"p-4 "+("grid"===b?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4":"space-y-3 md:space-y-4"),children:l?s.jsx(Oe,{}):i?s.jsx(Ie,{message:i}):a&&0!==a.length?a.map(e=>"grid"===b?s.jsx(Le,{product:e,onEdit:()=>{k(e),D(!0)},onDelete:()=>{k(e),L(!0)}},e.id):s.jsx(ze,{product:e,onEdit:()=>{k(e),D(!0)},onDelete:()=>{k(e),L(!0)}},e.id)):s.jsx(ae,{icon:S,title:"لا توجد منتجات",description:"ابدأ بإضافة منتجاتك الأولى لبناء متجرك"})}),P&&s.jsx(De,{onClose:()=>E(!1),onSubmit:async(e,t)=>{try{await c(e,t)&&(E(!1),await d())}catch(s){}},uploadImages:m,ediState:$}),$&&C&&s.jsx(De,{product:C,onClose:()=>{D(!1),k(null)},onSubmit:(e,t)=>(async(e,t,s)=>{try{await u(e,t,s)&&(D(!1),k(null),await d())}catch(a){}})(C.id,e,t),uploadImages:m,editeState:$}),z&&C&&s.jsx(Ue,{product:C,onClose:()=>{L(!1),k(null)},onConfirm:()=>(async e=>{await x(e)&&(L(!1),k(null),await d())})(C.id),isDeleting:n,error:o})]})},De=({product:t,onClose:r,onSubmit:l,uploadImages:n,ediState:i=!0})=>{const[o,d]=e.useState({id:"",name:"",code:"",category:"",description:"",basePrice:"",discountPrice:"",status:"active",features:[],tag:"",tagColor:"",variants:[{id:"",product_id:"",colorName:"",colorCode:"#000000",images:[],sizes:[{size:"",quantity:0}]}],_imageFiles:{}}),[c,u]=e.useState({}),[x,m]=e.useState(!1),{handleFormImageUpload:h,clearImageFiles:p,uploadErrors:b,isUploading:g,uploadProgress:v}=(t=>{const[s,a]=e.useState({}),[r,l]=e.useState(!1),[n,i]=e.useState({});return{handleFormImageUpload:e.useCallback(async(e,s,r)=>{if(!r?.length)return s;l(!0),a({}),i(t=>({...t,[e]:0}));try{const a=s.variants[e].colorName;if(!a.trim())throw new Error("يجب إدخال اسم اللون قبل رفع الصور");if(!s.code)return{...s,_imageFiles:{...s._imageFiles,[e]:r}};const l=await t(s.code,a,r,t=>{i(s=>({...s,[e]:t}))});return{...s,variants:s.variants.map((t,s)=>s===e?{...t,images:[...t.images,...l]}:t)}}catch(n){throw a(t=>({...t,[e]:n.message})),n}finally{l(!1),i(t=>({...t,[e]:0}))}},[t]),clearImageFiles:e.useCallback(e=>{const{_imageFiles:t,...s}=e;return{cleanData:s,imageFiles:t||{}}},[]),uploadErrors:s,isUploading:r,uploadProgress:n,setUploadErrors:a,setUploadProgress:i}})(n);e.useEffect(()=>{t&&d({id:t.id||"",name:t.name,code:t.code,category:t.category,description:t.description||"",basePrice:t.basePrice.toString(),discountPrice:t.discountPrice?.toString()||"",status:t.status,tag:t.tag,_imageFiles:{},tagColor:t.tagColor,features:t.features,variants:t.variants.map(e=>({product_id:t.id,id:e.id,colorName:e.colorName,colorCode:e.colorCode,images:e.images,sizes:e.sizes.map(e=>({size:e.size,quantity:e.quantity}))}))})},[t]);const N=e=>{const{name:t,value:s}=e.target;d(e=>({...e,[t]:s})),u(e=>({...e,[t]:""}))},y=(e,t,s)=>{d(a=>({...a,variants:a.variants.map((a,r)=>r===e?{...a,[t]:s}:a)}))},w=(e,t,s,a)=>{d(r=>({...r,variants:r.variants.map((r,l)=>l===e?{...r,sizes:r.sizes.map((e,r)=>r===t?{...e,[s]:a}:e)}:r)}))},C=async(e,t)=>{try{const s=await h(e,o,t);d(s)}catch(s){}},k=(e,t)=>{d(s=>({...s,variants:s.variants.map((s,a)=>a===e?{...s,images:s.images.filter((e,s)=>s!==t)}:s)}))};return s.jsx(fe,{isOpen:!0,onClose:r,title:t?"تعديل منتج":"إضافة منتج",size:"xl",children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.name.trim()||(e.name="اسم المنتج مطلوب"),o.category||(e.category="الفئة مطلوبة"),o.basePrice||(e.basePrice="السعر الأساسي مطلوب"),isNaN(parseFloat(o.basePrice))&&(e.basePrice="السعر يجب أن يكون رقماً"),o.discountPrice&&isNaN(parseFloat(o.discountPrice))&&(e.discountPrice="سعر الخصم يجب أن يكون رقماً"),o.variants.forEach((t,s)=>{t.colorName||(e[`variant${s}Color`]="اللون مطلوب"),t.sizes.forEach((t,a)=>{t.size||(e[`variant${s}Size${a}`]="المقاس مطلوب"),isNaN(parseInt(t.quantity))&&(e[`variant${s}Quantity${a}`]="الكمية يجب أن تكون رقماً")})}),u(e),0===Object.keys(e).length})()){m(!0);try{const{cleanData:e,imageFiles:t}=p(o),s={...e,id:e.id,name:e.name,code:e.code,category:e.category,description:e.description||"",basePrice:e.basePrice.toString(),discountPrice:e.discountPrice?.toString()||"",status:e.status,tag:e.tag,imageFiles:e.imageFiles,tagColor:e.tagColor,...e.features?.length?{features:e.features}:{},variants:e.variants.map(t=>({id:t.id,product_id:e.id,colorName:t.colorName,colorCode:t.colorCode,images:t.images,sizes:t.sizes.map(e=>({size:e.size,quantity:parseInt(e.quantity)}))}))};await l(s,t),m(!1),r()}catch(t){u(e=>({...e,submit:t.message}))}finally{m(!1)}}},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(ye,{name:"اسم المنتج",value:Pe(o.name),onChange:N,placeholder:"",hint:"أدخل اسم المنتج",error:c.name,required:!0}),s.jsx(we,{name:"الفئة",value:Pe(o.category),onChange:N,error:c.category,required:!0,options:[{value:"men",label:"رجالي"},{value:"women",label:"حريمي"},{value:"bags",label:"حقائب"}]}),s.jsx(Ce,{name:"الوصف",value:Pe(o.description),onChange:N,placeholder:"",hint:"أدخل وصف المنتج",error:c.description,rows:3}),s.jsxs(Se,{cols:2,children:[s.jsx(ye,{name:"السعر الأساسي",type:"number",value:Pe(o.basePrice,0),onChange:N,placeholder:"",error:c.basePrice,hint:"السعر بالجنيه المصري",required:!0}),s.jsx(ye,{name:"سعر الخصم (اختياري)",type:"number",value:Pe(o.discountPrice,0),onChange:N,placeholder:"",error:c.discountPrice,hint:"السعر بعد الخصم"})]}),s.jsx(we,{name:"الحالة",value:Pe(o.status,"active"),onChange:N,error:c.status,required:!0,options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}]})]}),s.jsxs(Se,{cols:2,children:[s.jsx(ye,{name:"العلامة (اختياري)",type:"text",value:Pe(o.tag),onChange:e=>d({...o,tag:e.target.value}),placeholder:"",hint:"مثال: جديد، مبيع سريع"}),s.jsx(we,{name:"لون العلامة",value:Pe(o.tagColor,"#3B82F6"),onChange:e=>d({...o,tagColor:e.target.value}),options:[{label:"أزرق",value:"#3B82F6"},{label:"أخضر",value:"#10B981"},{label:"أحمر",value:"#EF4444"},{label:"بنفسجي",value:"#8B5CF6"},{label:"رمادي",value:"#64748B"},{label:"وردي",value:"#EC4899"},{label:"سماوي",value:"#0EA5E9"}]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"المميزات (اختياري)"}),s.jsx("button",{type:"button",onClick:()=>d(e=>({...e,features:[...e.features,""]})),className:"p-2 bg-primary-500/10 text-primary-500 rounded-xl\n               hover:bg-primary-500/20 transition-colors",children:s.jsx(j,{className:"w-5 h-5"})})]}),o.features?.map((e,t)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{value:Pe(e),onChange:e=>((e,t)=>{d(s=>({...s,features:s.features.map((s,a)=>a===e?t:s)}))})(t,e.target.value),placeholder:"",hint:"أدخل ميزة المنتج...",className:"flex-1"}),s.jsx("button",{type:"button",onClick:()=>(e=>d(t=>({...t,features:t.features.filter((t,s)=>s!==e)})))(t),className:"p-2 bg-error-500/10 text-error-500 rounded-xl\n                 hover:bg-error-500/20 transition-colors",children:s.jsx(E,{className:"w-5 h-5"})})]},t))]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"الألوان والمقاسات"}),s.jsx("button",{type:"button",onClick:()=>d(e=>({...e,variants:[...e.variants,{id:"",product_id:"",colorName:"",colorCode:"#000000",images:[],sizes:[{size:"",quantity:0}]}]})),className:"p-2 bg-primary-500/10 text-primary-500 rounded-xl\n                       hover:bg-primary-500/20 transition-colors",children:s.jsx(j,{className:"w-5 h-5"})})]}),o.variants.map((e,t)=>s.jsxs("div",{className:"bg-neutral-800/30 rounded-xl p-4 space-y-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4 pb-4",children:[s.jsxs(Se,{cols:2,className:"flex-1",children:[s.jsx(we,{name:"اللون",value:Pe(e.colorName),onChange:e=>{const s=Ee.find(t=>t.value===e.target.value);y(t,"colorName",e.target.value),y(t,"colorCode",s?.code||"#000000")},error:c[`variant${t}Color`],options:Ee,required:!0}),s.jsx(Ne,{label:"كود اللون",hint:"اختر لون مخصص",children:s.jsx("input",{type:"color",value:Pe(e.colorCode,"#000000"),onChange:e=>y(t,"colorCode",e.target.value),className:"w-full h-12 rounded-xl border border-neutral-700/50 bg-neutral-800/70"})})]}),o.variants.length>1&&s.jsx("button",{type:"button",onClick:()=>{return e=t,d(t=>({...t,variants:t.variants.filter((t,s)=>s!==e)}));var e},className:"p-2 bg-error-500/10 text-error-500 rounded-xl\n                            hover:bg-error-500/20 transition-colors self-start",children:s.jsx(E,{className:"w-5 h-5"})})]}),i&&s.jsx(je,{variant:e,variantIndex:t,onImageUpload:C,onImageRemove:k,isUploading:g,uploadProgress:v,error:b[t]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-medium text-white",children:"المقاسات"}),s.jsx("button",{type:"button",onClick:()=>(e=>d(t=>({...t,variants:t.variants.map((t,s)=>s===e?{...t,sizes:[...t.sizes,{size:"",quantity:0}]}:t)})))(t),className:"p-2 bg-primary-500/10 text-primary-500 rounded-xl\n                             hover:bg-primary-500/20 transition-colors",children:s.jsx(j,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"space-y-3",children:e.sizes.map((a,r)=>s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(ye,{name:"المقاس",value:Pe(a.size),onChange:e=>w(t,r,"size",e.target.value),placeholder:"",error:c[`variant${t}Size${r}`],hint:"مثال: S, M, L, XL",required:!0})}),s.jsx("div",{className:"flex-1",children:s.jsx(ye,{name:"الكمية",type:"number",value:Pe(a.quantity,0),onChange:e=>w(t,r,"quantity",e.target.value),placeholder:"",error:c[`variant${t}Quantity${r}`],hint:"عدد القطع المتوفرة",required:!0})}),e.sizes.length>1&&s.jsx("button",{type:"button",onClick:()=>((e,t)=>d(s=>({...s,variants:s.variants.map((s,a)=>a===e?{...s,sizes:s.sizes.filter((e,s)=>s!==t)}:s)})))(t,r),className:"p-2 bg-error-500/10 text-error-500 rounded-xl\n                                   hover:bg-error-500/20 transition-colors self-start",children:s.jsx(E,{className:"w-5 h-5"})})]},r))})]})]},t))]}),c.submit&&s.jsxs("div",{className:"bg-error-500/10 text-error-500 p-4 rounded-xl flex items-center gap-2",children:[s.jsx(a,{className:"w-5 h-5"}),s.jsx("p",{children:c.submit})]}),s.jsxs(ke,{className:"pt-6 border-t border-neutral-800/50",children:[s.jsx(oe,{type:"button",onClick:r,variant:"secondary",className:"flex-1 sm:flex-none",children:"إلغاء"}),s.jsx(oe,{type:"submit",disabled:x||g,variant:"primary",loading:x,className:"flex-1 sm:flex-none",children:x?s.jsx("span",{children:"جاري الحفظ..."}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-5 h-5"}),s.jsx("span",{children:"حفظ"})]})})]})]})})},ze=({product:e,onEdit:t,onDelete:a})=>{e.variants[0]?.images[0];const r=e.variants.reduce((e,t)=>e+t.sizes.reduce((e,t)=>e+t.quantity,0),0),l=e.variants.length,i=e.variants.reduce((e,t)=>e+t.sizes.length,0);return s.jsxs("div",{className:"group bg-neutral-800/30 rounded-2xl p-4 \n                  border border-neutral-700/50 hover:border-blue-500/30\n                  transition-all duration-300",dir:"ltr",children:[s.jsxs("div",{className:"flex gap-4",dir:"rtl",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4",dir:"ltr",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium\n                         "+("active"===e.status?"bg-success-500/20 text-success-500":"bg-error-500/20 text-error-500"),children:"active"===e.status?"نشط":"غير نشط"}),s.jsxs("div",{className:"text-right",children:[s.jsx("h3",{className:"font-bold text-white group-hover:text-blue-500 \n                           transition-colors",children:e.name}),s.jsxs("p",{className:"text-sm text-neutral-400",dir:"rtl",children:["كود: ",e.code]})]})]}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-x-6 gap-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($,{className:"w-4 h-4 text-blue-500"}),s.jsxs("span",{className:"text-blue-500 font-bold",children:[e.basePrice.toLocaleString("ar-EG")," جنيه"]}),e.discountPrice&&s.jsxs("span",{className:"text-sm text-neutral-500 line-through",children:[e.discountPrice.toLocaleString("ar-EG")," جنيه"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4 text-neutral-400"}),s.jsxs("span",{className:"text-neutral-400",children:["المخزون: ",r]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-500",style:{backgroundColor:e.variants[0]?.colorCode}}),s.jsxs("span",{className:"text-neutral-400",children:[l," لون, ",i," مقاس"]})]})]}),e.features?.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.features.slice(0,3).map((e,t)=>s.jsx("span",{className:"px-2 py-1 rounded-lg bg-neutral-800 text-neutral-400 \n                               text-sm",children:e},t)),e.features.length>3&&s.jsxs("span",{className:"px-2 py-1 rounded-lg bg-neutral-800 text-neutral-400 \n                               text-sm",children:["+",e.features.length-3]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:t,className:"p-2 rounded-xl bg-primary-500/10 text-primary-500\n                     hover:bg-primary-500/20 transition-colors",children:s.jsx(P,{className:"w-5 h-5"})}),s.jsx("button",{onClick:a,className:"p-2 rounded-xl bg-error-500/10 text-error-500\n                     hover:bg-error-500/20 transition-colors",children:s.jsx(E,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-700/50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto hide-scrollbar pb-2",children:e.variants.map((e,t)=>s.jsxs("div",{className:"flex-shrink-0 group/variant cursor-pointer",children:[s.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:[s.jsx("img",{src:e.images[0],alt:e.colorName,className:"w-full h-full object-cover transform transition-transform\n                           duration-500 group-hover/variant:scale-110"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t \n                               from-black/50 to-transparent"}),s.jsx("div",{className:"absolute bottom-1 right-1 w-3 h-3 rounded-full",style:{backgroundColor:e.colorCode}})]}),s.jsxs("div",{className:"mt-1 text-center",children:[s.jsx("p",{className:"text-sm text-neutral-400",children:e.colorName}),s.jsxs("p",{className:"text-xs text-neutral-500",children:[e.sizes.length," مقاس"]})]})]},t))})})]})};t.forwardRef(({label:e,error:t,type:a="text",className:r="",...l},n)=>s.jsx(de,{ref:n,label:e,error:t,type:a,className:r,...l})).displayName="Input";const Le=({product:e,onEdit:t,onDelete:a})=>{const r=e.variants[0]?.images[0],l=e.variants.reduce((e,t)=>e+t.sizes.reduce((e,t)=>e+t.quantity,0),0);return s.jsxs(ie,{variant:"default",padding:"md",className:"border-neutral-700/50 hover:border-primary-500/30 group space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"relative aspect-square rounded-lg md:rounded-xl overflow-hidden",children:[s.jsx("img",{src:r,alt:e.name,className:"w-full h-full object-cover transform transition-transform\n                   duration-500 group-hover:scale-110"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),s.jsx("div",{className:"absolute top-1 md:top-2 right-1 md:right-2",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium\n                        "+("active"===e.status?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"),children:"active"===e.status?"نشط":"غير نشط"})}),s.jsxs("div",{className:"absolute bottom-1 md:bottom-2 left-1 md:left-2 flex gap-1 md:gap-2 \n                     opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:t,className:"p-1.5 md:p-2 rounded-lg md:rounded-xl bg-blue-500/20 text-blue-500\n                         hover:bg-blue-500/30 transition-colors",children:s.jsx(P,{className:"w-4 h-4 md:w-5 md:h-5"})}),s.jsx("button",{onClick:a,className:"p-1.5 md:p-2 rounded-lg md:rounded-xl bg-red-500/20 text-red-500\n                         hover:bg-red-500/30 transition-colors",children:s.jsx(E,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-bold text-white text-sm md:text-base truncate",children:e.name}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs md:text-sm text-neutral-400",children:["المخزون: ",l]}),s.jsxs("span",{className:"text-primary-500 font-bold text-sm md:text-base",children:[e.basePrice.toLocaleString("ar-EG")," جنيه"]})]})]})]})},Ue=({product:e,onClose:t,onConfirm:r})=>s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),s.jsx(ie,{variant:"elevated",padding:"lg",className:"w-full max-w-md space-y-4",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-danger-500/10 flex items-center justify-center",children:s.jsx(a,{className:"w-8 h-8 text-danger-500"})}),s.jsx("h2",{className:"text-xl font-bold text-white",dir:"rtl",children:"تأكيد الحذف"}),s.jsxs("p",{className:"text-neutral-400",dir:"rtl",children:['هل أنت متأكد من حذف المنتج "',e.name,'"؟',s.jsx("br",{}),"لا يمكن التراجع عن هذا الإجراء."]}),s.jsxs("div",{className:"flex gap-4 pt-2",children:[s.jsx(oe,{onClick:t,variant:"secondary",className:"flex-1",children:"إلغاء"}),s.jsx(oe,{onClick:r,variant:"danger",className:"flex-1",children:"حذف"})]})]})})]}),Oe=()=>s.jsx("div",{className:"col-span-full flex items-center justify-center py-12",children:s.jsxs("div",{className:"space-y-4 text-center",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 \n                    border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"text-neutral-400",children:"جاري تحميل المنتجات..."})]})}),Ie=({message:e})=>s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"حدث خطأ"}),s.jsx("p",{className:"text-neutral-400",children:e})]}),Fe=[{id:"all",label:"الكل",icon:v},{id:"men",label:"رجالي",icon:C},{id:"women",label:"حريمي",icon:k}],Re=()=>{const{orders:t,selectedOrder:a,page:r,totalPages:i,filters:o,isLoading:d,error:c,setSelectedOrder:u,updateFilters:x,updateOrderStatus:m,nextPage:h,previousPage:p}=(()=>{const[t,s]=e.useState([]),[a,r]=e.useState(0),[l,n]=e.useState(null),[i,o]=e.useState(1),[d,c]=e.useState(0),[u,x]=e.useState(20),[m,h]=e.useState({status:"all",startDate:null,endDate:null,search:""}),[p,b]=e.useState(!1),[g,j]=e.useState(!1),[v,f]=e.useState(null),[N,y]=e.useState(null),{apiCall:w}=le(),C=e.useRef([]),k=e.useCallback(async(e=i,t=m)=>{b(!0),f(null);try{const a=new URLSearchParams({page:e,perPage:u,...t,...t.startDate&&{startDate:t.startDate.toISOString()},...t.endDate&&{endDate:t.endDate.toISOString()}}).toString(),l=await w(`/admin/orders?${a}`);return l?.orders&&(s(l.orders),r(l.total),c(l.pages),C.current=l.orders),l}catch(a){return f(a.message),null}finally{b(!1)}},[w,i,u,m]),S=e.useCallback(async(e,a)=>{j(!0),y(null);const r=[...t];try{s(t.map(t=>t.id===e?{...t,status:a}:t));const l=await w(`/admin/orders/${e}/status`,{method:"PUT",body:JSON.stringify({status:a})});if(!l)throw s(r),new Error("Failed to update order status");return await k(),l}catch(l){return y(l.message),s(r),null}finally{j(!1)}},[w,t,k]),P=e.useCallback(e=>{h(t=>({...t,...e})),o(1)},[]),E=e.useCallback(()=>{i<d&&o(e=>e+1)},[i,d]),$=e.useCallback(()=>{i>1&&o(e=>e-1)},[i]);return e.useEffect(()=>{k()},[i,m,k]),{orders:t,totalOrders:a,selectedOrder:l,page:i,totalPages:d,perPage:u,filters:m,isLoading:p,isUpdatingStatus:g,error:v,updateStatusError:N,setSelectedOrder:n,setPage:o,setPerPage:x,updateFilters:P,loadOrders:k,updateOrderStatus:S,nextPage:E,previousPage:$}})(),[b,g]=e.useState(!1),j=e.useMemo(()=>{if(!t.length)return null;const e=t.reduce((e,t)=>e+t.total,0),s=t.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),a=e/t.length;return{totalRevenue:e,totalOrders:t.length,pendingOrders:s.pending||0,processingOrders:s.processing||0,avgOrderValue:a}},[t]);return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",dir:"rtl",children:"الطلبات"}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[j?.totalOrders||0," طلب"]})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"إدارة الطلبات"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"متابعة وإدارة جميع طلبات العملاء"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("span",{className:"text-sm text-neutral-400",children:["إجمالي الطلبات: ",j?.totalOrders||0]})})]})}),s.jsxs("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx(Te,{title:"إجمالي المبيعات",value:(j?.totalRevenue?.toLocaleString("ar-EG")||0)+" جنيه",icon:l,color:"emerald"}),s.jsx(Te,{title:"عدد الطلبات",value:j?.totalOrders||0,icon:n,color:"blue"}),s.jsx(Te,{title:"متوسط قيمة الطلب",value:(j?.avgOrderValue?.toLocaleString("ar-EG")||0)+" جنيه",icon:D,color:"blue"}),s.jsx(Te,{title:"طلبات معلقة",value:j?.pendingOrders||0,icon:z,color:"red"})]}),s.jsxs("div",{className:"sticky top-0 md:top-16 z-30 bg-neutral-950/95 backdrop-blur-xl p-4 space-y-4 \n                           border-b border-neutral-800/50",children:[s.jsx(qe,{value:o.search,onChange:e=>x({search:e})}),s.jsx(Ae,{activeStatus:o.status,onStatusChange:e=>x({status:e})})]}),s.jsx("div",{className:"p-4 space-y-3 md:space-y-4",children:d?s.jsx(Ve,{}):c?s.jsx(Je,{message:c}):0===t.length?s.jsx(We,{}):t.map(e=>s.jsx(Ge,{order:e,onClick:()=>{u(e),g(!0)}},e.id))}),a&&s.jsx(Be,{order:a,isOpen:b,onClose:()=>{g(!1),u(null)},onUpdateStatus:m}),i>1&&s.jsx(Ke,{page:r,totalPages:i,onNext:h,onPrevious:p})]})},Te=({title:e,value:t,icon:a,color:r})=>{const l={emerald:{bg:"bg-emerald-500/10",text:"text-emerald-500",border:"border-emerald-500/20"},blue:{bg:"bg-blue-500/10",text:"text-blue-500",border:"border-blue-500/20"},red:{bg:"bg-red-500/10",text:"text-red-500",border:"border-red-500/20"}}[r];return s.jsxs("div",{className:`relative overflow-hidden rounded-xl md:rounded-2xl p-3 md:p-4 \n                        ${l.bg} border ${l.border}`,dir:"rtl",children:[s.jsx("div",{className:"absolute top-2 md:top-4 left-2 md:left-4",children:s.jsx(a,{className:`w-5 h-5 md:w-6 md:h-6 ${l.text}`})}),s.jsxs("div",{className:"mt-5 md:mt-6",children:[s.jsx("h3",{className:"text-xs md:text-sm font-medium text-neutral-400 leading-tight",children:e}),s.jsx("div",{className:"mt-1 md:mt-2",children:s.jsx("span",{className:`text-lg md:text-2xl font-bold ${l.text}`,children:t})})]})]})},qe=({value:e,onChange:t})=>s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"",className:"w-full h-12 !bg-neutral-800/70 rounded-xl px-12 !text-white text-right\n                 !border-neutral-700/50 focus:!border-blue-500/50\n                 focus:ring-2 focus:ring-blue-500/50\n                 placeholder:!text-neutral-500",style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},dir:"rtl"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-neutral-500",children:"ابحث برقم الطلب أو رقم الهاتف..."}),s.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e&&s.jsx("button",{onClick:()=>t(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full\n                   hover:bg-neutral-700/50 transition-colors",children:s.jsx(p,{className:"w-4 h-4 text-neutral-400"})})]}),Ae=({activeStatus:e,onStatusChange:t})=>{const a=[{id:"all",label:"الكل",icon:n},{id:"pending",label:"معلق",icon:z},{id:"processing",label:"قيد التنفيذ",icon:r},{id:"delivered",label:"تم التسليم",icon:L},{id:"cancelled",label:"ملغي",icon:U}];return s.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar py-2",dir:"rtl",children:a.map(({id:a,label:r,icon:l})=>s.jsxs("button",{onClick:()=>t(a),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm\n                     whitespace-nowrap transition-colors\n                     "+(e===a?"bg-blue-500 text-white":"bg-neutral-800/50 text-neutral-400 hover:bg-neutral-700/50"),children:[s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{children:r})]},a))})},Ge=({order:e,onClick:t})=>{const a={pending:{icon:z,color:"text-blue-500",bgColor:"bg-blue-500/10",label:"معلق"},processing:{icon:r,color:"text-blue-500",bgColor:"bg-blue-500/10",label:"قيد التنفيذ"},delivered:{icon:L,color:"text-green-500",bgColor:"bg-green-500/10",label:"تم التسليم"},cancelled:{icon:U,color:"text-red-500",bgColor:"bg-red-500/10",label:"ملغي"}}[e.status]||{icon:n,color:"text-neutral-500",bgColor:"bg-neutral-500/10",label:"غير معروف"},l=a.icon,i=e.userPhone||e.user?.phone_number,o=e.userName||e.user?.name,d=e.total||0,c=e.createdAt||e.created_at;return s.jsxs("div",{onClick:t,className:"group bg-neutral-800/30 rounded-xl md:rounded-2xl p-3 md:p-4 space-y-3 md:space-y-4 cursor-pointer\n                  border border-neutral-700/50 hover:border-blue-500/30\n                  transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-800/0 to-neutral-800/50 opacity-0 \n                      group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-3 md:gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 px-2 md:px-3 py-1.5 rounded-full self-start\n                          ${a.color} ${a.bgColor} border border-transparent\n                          transition-all duration-300 group-hover:border-current/20`,children:[s.jsx(l,{className:"w-3 h-3 md:w-4 md:h-4 "+("processing"===e.status?"group-hover:animate-spin":"")}),s.jsx("span",{className:"text-xs md:text-sm font-medium",children:a.label})]}),s.jsxs("div",{className:"text-right flex-1 min-w-0",children:[o&&s.jsx("h3",{className:"font-bold text-white text-sm md:text-base truncate group-hover:text-blue-500\n                             transition-colors duration-300",children:o}),i&&s.jsx("p",{className:"text-xs md:text-sm text-neutral-400 mt-0.5",dir:"ltr",children:i}),c&&s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:new Date(c).toLocaleString("ar-EG",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 md:pt-4 border-t border-neutral-700/50 mt-3 md:mt-4",children:[s.jsx("div",{className:"flex gap-1 md:gap-2",children:i&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),i&&window.open(`https://wa.me/${i}`,"_blank")},className:"p-1.5 md:p-2 rounded-lg md:rounded-xl bg-neutral-800/50 hover:bg-green-500/10\n                            border border-transparent hover:border-green-500/30\n                            transition-all duration-300 group/btn",title:"واتساب",children:s.jsx(O,{className:"w-4 h-4 md:w-5 md:h-5 text-green-500 transition-transform duration-300\n                                          group-hover/btn:scale-110"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),i&&window.open(`tel:${i}`,"_blank")},className:"p-1.5 md:p-2 rounded-lg md:rounded-xl bg-neutral-800/50 hover:bg-blue-500/10\n                            border border-transparent hover:border-blue-500/30\n                            transition-all duration-300 group/btn",title:"اتصال",children:s.jsx(I,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-500 transition-transform duration-300\n                                  group-hover/btn:scale-110"})}),s.jsx("button",{onClick:async e=>{if(e.stopPropagation(),i)try{await navigator.clipboard.writeText(i)}catch(t){}},className:"p-1.5 md:p-2 rounded-lg md:rounded-xl bg-neutral-800/50 hover:bg-blue-500/10\n                            border border-transparent hover:border-blue-500/30\n                            transition-all duration-300 group/btn",title:"نسخ رقم الهاتف",children:s.jsx(F,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-500 transition-transform duration-300\n                                 group-hover/btn:scale-110"})})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"block font-bold text-blue-500 text-sm md:text-lg",children:[d.toLocaleString("ar-EG")," جنيه"]}),e.items?.length>0&&s.jsxs("span",{className:"text-xs text-neutral-400",children:[e.items.length," منتج"]})]}),s.jsx(n,{className:"w-4 h-4 md:w-5 md:h-5 text-neutral-400 group-hover:text-blue-500\n                              transition-colors duration-300"})]})]})]})]})},Be=({order:e,isOpen:t,onClose:a,onUpdateStatus:l})=>{if(!e)return null;const n=e.userPhone||e.user?.phone_number,i=e.items||[],o=e.total||0,d=e.subtotal||0,c=e.tracking||[];return s.jsxs("div",{className:"fixed inset-0 z-50 transition-opacity duration-300\n                      "+(t?"opacity-100":"opacity-0 pointer-events-none"),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),s.jsx("div",{className:"fixed inset-x-0 bottom-0 transform transition-transform duration-500 \n                        "+(t?"translate-y-0":"translate-y-full"),children:s.jsx("div",{className:"bg-gradient-to-b from-neutral-950/95 to-neutral-950 backdrop-blur-xl\n                        rounded-t-[2.5rem] border-t border-neutral-800/50 shadow-2xl\n                        max-h-[90vh] overflow-y-auto hide-scrollbar",children:s.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:a,className:"p-2 -m-2 rounded-full hover:bg-neutral-850/50 transition-colors",children:s.jsx(g,{className:"w-6 h-6 text-neutral-400"})}),s.jsx("div",{className:"text-center flex-1",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm\n                                bg-neutral-850/50",children:[s.jsx(_e,{status:e.status,className:"w-4 h-4"}),s.jsx("span",{children:Me(e.status)})]})}),s.jsx("button",{onClick:async()=>{const t=`\n  طلب من: ${n}\n  المنتجات:\n  ${i.map(e=>`• ${e.productName||e.name}\n     ${e.quantity}× - المقاس: ${e.size} - اللون: ${e.variant}\n     السعر: ${(e.price*e.quantity).toLocaleString("ar-EG")} جنيه`).join("\n")}\n  \n  الإجمالي: ${o.toLocaleString("ar-EG")} جنيه\n  التاريخ: ${new Date(e.createdAt).toLocaleString("ar-EG")}`.trim();try{navigator.share?await navigator.share({text:t}):await navigator.clipboard.writeText(t)}catch(s){s.name}},className:"p-2 -m-2 rounded-full hover:bg-neutral-850/50 transition-colors",children:s.jsx(R,{className:"w-6 h-6 text-neutral-400"})})]}),s.jsxs("div",{className:"bg-neutral-850/30 rounded-xl md:rounded-2xl p-3 md:p-4 border border-neutral-700/30",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-base md:text-lg font-bold text-white",children:"معلومات العميل"}),s.jsx("span",{className:"text-xs md:text-sm text-neutral-400",dir:"ltr",children:n})]}),s.jsxs("div",{className:"flex gap-2 mt-3 md:mt-4",children:[s.jsxs("button",{onClick:()=>window.open(`https://wa.me/${n}`,"_blank"),className:"flex-1 flex items-center justify-center gap-2 p-2.5 md:p-3 rounded-lg md:rounded-xl\n                                   bg-neutral-800/50 hover:bg-green-500/10 border border-transparent\n                                   hover:border-green-500/30 transition-all duration-300",children:[s.jsx(O,{className:"w-4 h-4 md:w-5 md:h-5 text-green-500"}),s.jsx("span",{className:"text-xs md:text-sm text-neutral-400",children:"واتساب"})]}),s.jsxs("button",{onClick:()=>window.open(`tel:${n}`,"_blank"),className:"flex-1 flex items-center justify-center gap-2 p-2.5 md:p-3 rounded-lg md:rounded-xl\n                                   bg-neutral-800/50 hover:bg-blue-500/10 border border-transparent\n                                   hover:border-blue-500/30 transition-all duration-300",children:[s.jsx(I,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-500"}),s.jsx("span",{className:"text-xs md:text-sm text-neutral-400",children:"اتصال"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:"المنتجات"}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[i.length," منتج"]})]}),s.jsx("div",{className:"space-y-3",children:i.map((e,t)=>s.jsxs("div",{className:"bg-neutral-800/30 rounded-xl p-3 flex gap-3",children:[s.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden hide-scrollbar group",children:[s.jsx("img",{src:e.image,alt:e.productName,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),s.jsxs("span",{className:"absolute bottom-1 right-1 text-xs bg-black/50 text-white\n                                       px-1.5 py-0.5 rounded-full",children:[e.quantity,"×"]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("span",{className:"text-blue-500 font-bold whitespace-nowrap",children:[(e.price*e.quantity).toLocaleString("ar-EG")," جنيه"]}),s.jsx("h4",{className:"font-medium text-white text-right truncate",children:e.productName||e.name})]}),s.jsxs("div",{className:"mt-1 flex justify-end items-center gap-3",children:[s.jsxs("span",{className:"text-sm text-neutral-400",children:["المقاس: ",e.size]}),s.jsxs("span",{className:"text-sm text-neutral-400",children:["اللون: ",e.variant]})]})]})]},t))})]}),s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-blue-500 font-bold",children:[d.toLocaleString("ar-EG")," جنيه"]}),s.jsx("span",{className:"text-neutral-400",children:"المجموع"})]}),0!=e.shipping&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-green-500 font-bold",children:[e.shipping.toLocaleString("ar-EG")," جنيه"]}),s.jsx("span",{className:"text-neutral-400",children:"الشحن"})]}),s.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-neutral-700 to-transparent"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xl font-bold text-white",children:[o.toLocaleString("ar-EG")," جنيه"]}),s.jsx("span",{className:"text-lg font-bold text-white",children:"الإجمالي"})]})]}),c.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-bold text-white",dir:"rtl",children:"تتبع الطلب"}),s.jsx("div",{className:"relative space-y-4",children:c.map((e,t)=>s.jsxs("div",{className:"flex items-start gap-4",children:[t!==c.length-1&&s.jsx("div",{className:"absolute top-8 bottom-0 left-4 w-px \n                                        bg-gradient-to-b from-neutral-700 to-transparent"}),s.jsx("div",{className:"relative z-10 w-8 h-8 rounded-full flex items-center justify-center\n                                      "+(e.completed?"bg-blue-500":"bg-neutral-700"),children:s.jsx(_e,{status:e.status,className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-neutral-400",children:new Date(e.timestamp).toLocaleString("ar-EG")}),s.jsx("span",{className:"font-medium text-white",children:Me(e.status)})]}),e.description&&s.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:e.description})]})]},t))})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[{status:"pending",label:"تعليق",icon:z,color:"blue"},{status:"processing",label:"معالجة",icon:r,color:"blue"},{status:"delivered",label:"تسليم",icon:L,color:"green"},{status:"cancelled",label:"إلغاء",icon:U,color:"red"}].map(({status:t,label:a,icon:r,color:n})=>{const i={blue:{text:"text-blue-500",bg:"bg-blue-500/10",border:"border-blue-500/30"},green:{text:"text-green-500",bg:"bg-green-500/10",border:"border-green-500/30"},red:{text:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/30"}}[n];return s.jsxs("button",{onClick:()=>l(e.id,t),disabled:e.status===t,className:"flex items-center justify-center gap-1.5 md:gap-2 p-2.5 md:p-3 \n                                               rounded-lg md:rounded-xl font-medium transition-all duration-300 group\n                                               "+(e.status===t?"bg-neutral-800/50 text-neutral-500 cursor-not-allowed":`bg-neutral-800/30 hover:${i.bg} \n                                                  border border-transparent hover:${i.border}`),children:[s.jsx(r,{className:"w-4 h-4 md:w-5 md:h-5 "+(e.status===t?"text-neutral-500":`${i.text} \n                                              ${"processing"===t?"group-hover:animate-spin":""}`)}),s.jsx("span",{className:"text-xs md:text-sm "+(e.status===t?"text-neutral-500":`text-neutral-400 group-hover:${i.text}`),children:a})]},t)})})]})})})]})},_e=({status:e})=>{const t={pending:z,processing:r,delivered:L,cancelled:U}[e]||n;return s.jsx(t,{className:"w-5 h-5"})},Me=e=>({pending:"معلق",processing:"قيد التنفيذ",delivered:"تم التسليم",cancelled:"ملغي"}[e]||"غير معروف"),Ve=()=>s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 \n                    border-t-transparent rounded-full"})}),Je=({message:e})=>s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"حدث خطأ"}),s.jsx("p",{className:"text-neutral-400",children:e})]}),We=()=>s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 \n                      flex items-center justify-center mb-8 shadow-2xl shadow-black/20 border border-neutral-800/50",children:s.jsx(n,{className:"w-12 h-12 text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"لا توجد طلبات"}),s.jsx("p",{className:"text-neutral-400 text-lg max-w-md mx-auto leading-relaxed",children:"لم يتم العثور على طلبات تطابق معايير البحث"})]}),Ke=({page:e,totalPages:t,onNext:a,onPrevious:r})=>s.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-neutral-900/95 backdrop-blur-xl \n                  border-t border-neutral-800/50 p-4",children:s.jsxs("div",{className:"flex justify-between items-center max-w-lg mx-auto",children:[s.jsx("button",{onClick:r,disabled:e<=1,className:"p-2 rounded-xl bg-neutral-800/50 text-neutral-400\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  hover:bg-neutral-700/50 transition-colors",children:"السابق"}),s.jsxs("span",{className:"text-neutral-400",children:["صفحة ",e," من ",t]}),s.jsx("button",{onClick:a,disabled:e>=t,className:"p-2 rounded-xl bg-neutral-800/50 text-neutral-400\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  hover:bg-neutral-700/50 transition-colors",children:"التالي"})]})}),He=()=>{const{customers:t,totalCustomers:a,selectedCustomer:r,page:i,totalPages:h,search:p,isLoading:b,setSelectedCustomer:g,setSearch:j,nextPage:v,previousPage:f}=(()=>{const[t,s]=e.useState([]),[a,r]=e.useState(0),[l,n]=e.useState(null),[i,o]=e.useState(1),[d,c]=e.useState(0),[u,x]=e.useState(20),[m,h]=e.useState(""),[p,b]=e.useState(""),[g,j]=e.useState(!1),[v,f]=e.useState(!1),[N,y]=e.useState(null),[w,C]=e.useState(null),{apiCall:k}=le(),S=e.useRef(null);e.useEffect(()=>(S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{b(m),o(1)},300),()=>{S.current&&clearTimeout(S.current)}),[m]);const P=e.useCallback(async(e=i,t=p)=>{j(!0),y(null);try{const a=new URLSearchParams({page:e,perPage:u,search:t}).toString(),l=await k(`/admin/customers?${a}`);return l?.customers&&(s(l.customers),r(l.total),c(l.pages)),l}catch(a){return y(a.message),null}finally{j(!1)}},[k,i,u,p]),E=e.useCallback(async e=>{f(!0),C(null);try{const t=await k(`/admin/customers/${e}`);return t&&n(t),t}catch(t){return C(t.message),null}finally{f(!1)}},[k]),$=e.useCallback(()=>{i<d&&o(e=>e+1)},[i,d]),D=e.useCallback(()=>{i>1&&o(e=>e-1)},[i]);return e.useEffect(()=>{P()},[i,p,P]),{customers:t,totalCustomers:a,selectedCustomer:l,page:i,totalPages:d,perPage:u,search:m,isLoading:g,isLoadingDetails:v,error:N,detailsError:w,setSelectedCustomer:n,setPage:o,setPerPage:x,setSearch:h,loadCustomers:P,loadCustomerDetails:E,nextPage:$,previousPage:D}})(),[N,y]=e.useState(!1),[C,k]=e.useState({spendingRange:[],orderCount:[],location:[],dateRange:[]});C.spendingRange;const S=e.useMemo(()=>{if(!t.length)return null;const e={low:{min:0,max:1e3,count:0,total:0},medium:{min:1001,max:5e3,count:0,total:0},high:{min:5001,max:1/0,count:0,total:0}},s={},a={new:{min:0,max:1,count:0},regular:{min:2,max:5,count:0},loyal:{min:6,max:1/0,count:0}},r={};return t.forEach(t=>{const l=t.totalSpent||0;if(l<=e.low.max?(e.low.count++,e.low.total+=l):l<=e.medium.max?(e.medium.count++,e.medium.total+=l):(e.high.count++,e.high.total+=l),t.addresses?.[0]?.governorate){const e=t.addresses[0].governorate;s[e]=(s[e]||0)+1}const n=t.orderCount||0;n<=a.new.max?a.new.count++:n<=a.regular.max?a.regular.count++:a.loyal.count++;const i=Math.floor((new Date-new Date(t.createdAt))/2592e6),o=3*Math.floor(i/3);r[o]=(r[o]||0)+1}),{spendingRanges:e,locationData:Object.entries(s).map(([e,t])=>({name:e,value:t})),orderFrequency:a,customerAges:Object.entries(r).map(([e,t])=>({months:`${e}-${parseInt(e)+3} شهور`,count:t})).sort((e,t)=>parseInt(e.months)-parseInt(t.months))}},[t]),P=e.useMemo(()=>t.length?t.filter(e=>{const t=0===C.spendingRange.length||C.spendingRange.some(t=>{switch(t){case"low":return e.totalSpent<=1e3;case"medium":return e.totalSpent>1e3&&e.totalSpent<=5e3;case"high":return e.totalSpent>5e3;default:return!0}}),s=0===C.orderCount.length||C.orderCount.some(t=>{switch(t){case"new":return e.orderCount<=1;case"regular":return e.orderCount>1&&e.orderCount<=5;case"loyal":return e.orderCount>5;default:return!0}}),a=0===C.location.length||C.location.includes(e.addresses?.[0]?.governorate),r=0===C.dateRange.length||C.dateRange.some(t=>"recent"!==t||(new Date-new Date(e.createdAt))/864e5<=30);return t&&s&&a&&r}):[],[t,C]);return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",dir:"rtl",children:"العملاء"}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[a," عميل"]})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"إدارة العملاء"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"إدارة وتحليل بيانات العملاء والمبيعات"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("span",{className:"text-sm text-neutral-400",children:["إجمالي العملاء: ",a]})})]})}),s.jsxs("div",{className:"p-4 space-y-6 pt-0",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ce,{title:"إجمالي العملاء",value:a,icon:o,color:"primary"}),s.jsx(ce,{title:"عملاء جدد",value:S?.orderFrequency.new.count||0,subtitle:"آخر 30 يوم",icon:o,color:"success"})]}),S&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-800/30 rounded-2xl p-4 border border-gray-700/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"تصنيف العملاء"}),s.jsx("div",{className:"h-64",children:s.jsx(d,{width:"100%",height:"100%",children:s.jsxs(c,{children:[s.jsxs(u,{data:[{name:"عملاء جدد",value:S.orderFrequency.new.count},{name:"عملاء منتظمون",value:S.orderFrequency.regular.count},{name:"عملاء مخلصون",value:S.orderFrequency.loyal.count}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:[s.jsx(x,{fill:"#10B981"}),s.jsx(x,{fill:"#3B82F6"}),s.jsx(x,{fill:"#0ea5e9"})]}),s.jsx(m,{})]})})})]}),s.jsxs("div",{className:"bg-gray-800/30 rounded-2xl p-4 border border-gray-700/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"التوزيع الجغرافي"}),s.jsx("div",{className:"h-64",children:s.jsx(d,{width:"100%",height:"100%",children:s.jsxs(T,{data:S.locationData,children:[s.jsx(q,{dataKey:"name"}),s.jsx(A,{}),s.jsx(m,{}),s.jsx(G,{dataKey:"value",fill:"#3B82F6"})]})})})]})]})]}),s.jsxs("div",{className:"sticky top-0 z-30 bg-neutral-950/95 backdrop-blur-sm p-4 space-y-4 border-b border-neutral-800/50",children:[s.jsxs("div",{className:"relative",children:[s.jsx(de,{type:"text",value:p,onChange:e=>j(e.target.value),placeholder:"",hint:"ابحث برقم الهاتف أو العنوان...",className:"pr-12"}),s.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar",children:[s.jsx(Ye,{label:"مستوى الإنفاق",options:[{value:"low",label:"منخفض (≤ 1000)"},{value:"medium",label:"(1000-5000)"},{value:"high",label:"مرتفع (> 5000)"}],values:C.spendingRange,onChange:e=>k(t=>({...t,spendingRange:e})),icon:l}),s.jsx(Ye,{label:"عدد الطلبات",options:[{value:"new",label:"جديد (≤ 1)"},{value:"regular",label:"منتظم (2-5)"},{value:"loyal",label:"مخلص (> 5)"}],values:C.orderCount,onChange:e=>k(t=>({...t,orderCount:e})),icon:n}),S&&s.jsx(Ye,{label:"المنطقة",options:[...S.locationData.map(e=>({value:e.name,label:e.name}))],values:C.location,onChange:e=>k(t=>({...t,location:e})),icon:B}),s.jsx(Ye,{label:"تاريخ التسجيل",options:[{value:"recent",label:"آخر 30 يوم"}],values:C.dateRange,onChange:e=>k(t=>({...t,dateRange:e})),icon:_})]})]}),s.jsx("div",{className:"p-4 space-y-4",dir:"rtl",children:b?s.jsx(tt,{}):0===P.length?s.jsx(st,{}):P.map(e=>s.jsx(Xe,{customer:e,onClick:()=>{g(e),y(!0)}},e.id))}),r&&s.jsx(Ze,{customer:r,isOpen:N,onClose:()=>{y(!1),g(null)},analytics:S}),h>1&&s.jsx(et,{page:i,totalPages:h,onNext:v,onPrevious:f})]})},Qe=({title:e,value:t,icon:a,trend:r,subtitle:l,color:n="emerald"})=>s.jsxs("div",{className:`relative overflow-hidden rounded-2xl border p-4 ${{emerald:"bg-success-500/10 text-success-500 border-success-500/20",blue:"bg-blue-500/10 text-blue-500 border-blue-500/20"}[n]}`,dir:"rtl",children:[s.jsx("div",{className:"absolute top-4 left-4",children:s.jsx(a,{className:"w-6 h-6"})}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-400",children:e}),s.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-bold",children:t}),l&&s.jsx("span",{className:"text-sm text-gray-400",children:l})]}),r&&s.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[s.jsx(W,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:[r,"% زيادة"]})]})]})]}),Xe=({customer:e,onClick:t})=>{const a=(()=>{const t=e.orderCount||0;return t>5?{label:"عميل مخلص",color:"text-blue-500"}:t>1?{label:"عميل منتظم",color:"text-blue-500"}:{label:"عميل جديد",color:"text-success-500"}})();return s.jsxs("div",{onClick:t,className:"bg-gradient-to-br from-gray-800/40 to-gray-800/20 \n               rounded-2xl p-4 border border-gray-700/50 space-y-4 \n               hover:border-blue-500/30 transition-all duration-300 cursor-pointer",dir:"ltr",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t=>{t.stopPropagation(),window.open(`https://wa.me/${e.phone}`,"_blank")},className:"p-2 rounded-xl bg-gray-800/50 hover:bg-green-500/10\n                    border border-transparent hover:border-green-500/30\n                    transition-all duration-300",children:s.jsx(O,{className:"w-5 h-5 text-green-500"})}),s.jsx("a",{href:`tel:${e.phone}`,onClick:e=>e.stopPropagation(),className:"p-2 rounded-xl bg-gray-800/50 hover:bg-blue-500/10\n                    border border-transparent hover:border-blue-500/30\n                    transition-all duration-300",children:s.jsx(I,{className:"w-5 h-5 text-blue-500"})}),s.jsx("button",{onClick:async t=>{t.stopPropagation();try{await navigator.clipboard.writeText(e.phone)}catch(s){}},className:"p-2 rounded-xl bg-gray-800/50 hover:bg-blue-500/10\n                    border border-transparent hover:border-blue-500/30\n                    transition-all duration-300",children:s.jsx(F,{className:"w-5 h-5 text-blue-500"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("h3",{className:"text-lg font-bold text-white",dir:"ltr",children:e.phone}),s.jsx("span",{className:`text-sm ${a.color}`,children:a.label})]}),s.jsx("p",{className:"text-sm text-gray-400",children:new Date(e.createdAt).toLocaleDateString("ar-EG")})]})]}),e.addresses?.[0]&&s.jsxs("div",{className:"flex items-start gap-3",dir:"rtl",children:[s.jsx(M,{className:"w-5 h-5 text-blue-500 mt-0.5"}),s.jsxs("div",{className:"flex-1 text-right",children:[s.jsx("p",{className:"text-white",children:e.addresses[0].governorate}),s.jsx("p",{className:"text-sm text-gray-400",children:e.addresses[0].district}),e.addresses[0].details&&s.jsx("p",{className:"text-sm text-gray-500",children:e.addresses[0].details})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-700/50",children:[s.jsxs("div",{className:"space-y-1",dir:"rtl",children:[s.jsxs("div",{className:"flex items-center gap-2",dir:"rtl",children:[s.jsx(n,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-sm text-gray-400",children:"الطلبات"})]}),s.jsx("p",{className:"text-lg font-bold text-white pr-4",children:e.orderCount||0})]}),s.jsxs("div",{className:"space-y-1 text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"إجمالي المشتريات"}),s.jsx($,{className:"w-4 h-4 text-blue-500"})]}),s.jsxs("p",{className:"text-lg font-bold text-blue-500 pr-4",children:[(e.totalSpent||0).toLocaleString("ar-EG")," جنيه"]})]})]})]})},Ye=({label:t,options:a,values:r=[],onChange:l,icon:n})=>{const[i,o]=e.useState(!1),d=e.useRef(null);e.useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=e=>{const t=r.includes(e)?r.filter(t=>t!==e):[...r,e];l(t)},u=()=>{l([]),o(!1)},x=e=>s.jsx("div",{className:"w-5 h-5 rounded border flex items-center justify-center\n                      transition-colors duration-200\n                      "+(e?"border-blue-500 bg-blue-500":"border-gray-600"),children:e&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});return s.jsxs("div",{className:"relative",ref:d,children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 rounded-xl\n                     transition-all duration-200 whitespace-nowrap\n                     "+(i?"bg-blue-500/20 text-blue-500 border border-blue-500/30":r.length>0?"bg-blue-500/10 text-blue-500 border border-blue-500/20":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"),children:[n&&s.jsx(n,{className:"w-4 h-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:t}),0===r.length?null:s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/20 border border-blue-500/20",children:r.length})]})]}),s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden transition-opacity duration-300\n                      "+(i?"opacity-100":"opacity-0 pointer-events-none"),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>o(!1)}),s.jsx("div",{className:"fixed inset-x-0 bottom-0 transform transition-transform duration-500 ease-out\n                        "+(i?"translate-y-0":"translate-y-full"),children:s.jsxs("div",{className:"bg-gradient-to-b from-neutral-950/95 to-neutral-950 backdrop-blur-xl\n                         rounded-t-[2.5rem] border-t border-neutral-800/50 shadow-2xl\n                         max-h-[80vh] overflow-y-auto hide-scrollbar",children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-7 flex justify-center items-start",children:s.jsx("div",{className:"w-12 h-1 rounded-full bg-neutral-700/50 mt-3"})}),s.jsxs("div",{className:"px-6 pt-8 pb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:t}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:a.map(e=>s.jsxs("button",{onClick:()=>c(e.value),className:"flex items-center gap-3 p-4 rounded-xl\n                               transition-all duration-200\n                               "+(r.includes(e.value)?"bg-blue-500/20 text-blue-500 border border-blue-500/30":"bg-gray-800/30 text-gray-400 hover:bg-gray-700/50"),children:[x(r.includes(e.value)),s.jsx("span",{className:"flex-1 text-right",children:e.label})]},e.value))}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:u,className:"flex-1 py-3 rounded-xl bg-gray-800/50 text-gray-400\n                             hover:bg-gray-700/50 transition-colors",children:"إعادة تعيين"}),s.jsx("button",{onClick:()=>o(!1),className:"flex-1 py-3 rounded-xl bg-blue-500 text-white\n                             hover:bg-blue-600 transition-colors",children:"تطبيق"})]})]})]})})]}),i&&s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-gray-800\n                       rounded-xl shadow-xl border border-gray-700/50 \n                       hidden md:block",children:[s.jsx("div",{className:"py-2",children:a.map(e=>s.jsxs("button",{onClick:()=>c(e.value),className:"w-full flex items-center gap-3 px-4 py-3\n                           transition-colors\n                           "+(r.includes(e.value)?"text-blue-500 bg-blue-500/10":"text-gray-400 hover:bg-gray-700/50"),children:[x(r.includes(e.value)),s.jsx("span",{className:"flex-1 text-right",children:e.label})]},e.value))}),s.jsxs("div",{className:"border-t border-gray-700/50 p-2 flex gap-2",children:[s.jsx("button",{onClick:u,className:"flex-1 py-2 rounded-lg bg-gray-800/50 text-gray-400\n                         hover:bg-gray-700/50 transition-colors text-sm",children:"إعادة تعيين"}),s.jsx("button",{onClick:()=>o(!1),className:"flex-1 py-2 rounded-lg bg-blue-500 text-white\n                         hover:bg-blue-600 transition-colors text-sm",children:"تطبيق"})]})]})]})},Ze=({customer:e,isOpen:t,onClose:a,analytics:r})=>e?s.jsxs("div",{className:"fixed inset-0 z-50 transition-opacity duration-300\n                  "+(t?"opacity-100":"opacity-0 pointer-events-none"),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),s.jsx("div",{className:"fixed inset-x-0 bottom-0 transform transition-transform duration-500\n                    "+(t?"translate-y-0":"translate-y-full"),children:s.jsx("div",{className:"bg-gradient-to-b from-neutral-950/95 to-neutral-950 backdrop-blur-xl\n                     rounded-t-[2.5rem] border-t border-neutral-800/50 shadow-2xl\n                     max-h-[90vh] overflow-y-auto hide-scrollbar",dir:"rtl",children:s.jsxs("div",{className:"px-6 py-8 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",dir:"ltr",children:[s.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-800/50 transition-colors",children:"×"}),s.jsxs("div",{className:"text-right",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"تفاصيل العميل"}),s.jsxs("p",{className:"text-sm text-gray-400",children:["عميل منذ ",(()=>{const t=Math.floor((new Date-new Date(e.createdAt))/2592e6);if(t<1)return"أقل من شهر";if(1===t)return"شهر واحد";if(t<12)return`${t} أشهر`;const s=Math.floor(t/12);return`${s} ${1===s?"سنة":"سنوات"}`})()]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Qe,{title:"إجمالي الطلبات",value:e.orderCount||0,icon:n,color:"blue"}),s.jsx(Qe,{title:"إجمالي المشتريات",value:`${(e.totalSpent||0).toLocaleString("ar-EG")} جنيه`,icon:$,color:"emerald"})]}),s.jsxs("div",{className:"bg-gray-800/30 rounded-2xl p-4 space-y-4",children:[s.jsx("h3",{className:"font-bold text-white",children:"معلومات الاتصال"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(I,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"text-white",dir:"ltr",children:e.phone})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>window.open(`https://wa.me/${e.phone}`,"_blank"),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl\n                          bg-green-500/10 text-green-500 hover:bg-green-500/20\n                          transition-colors",children:[s.jsx(O,{className:"w-5 h-5"}),s.jsx("span",{children:"واتساب"})]}),s.jsxs("button",{onClick:()=>window.open(`tel:${e.phone}`),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl\n                          bg-blue-500/10 text-blue-500 hover:bg-blue-500/20\n                          transition-colors",children:[s.jsx(I,{className:"w-5 h-5"}),s.jsx("span",{children:"اتصال"})]})]})]}),e.addresses?.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-bold text-white",children:"العناوين"}),e.addresses.map((e,t)=>s.jsxs("div",{className:"bg-gray-800/30 rounded-xl p-4 space-y-2",children:[s.jsx("p",{className:"text-white",children:e.governorate}),s.jsx("p",{className:"text-gray-400",children:e.district}),e.details&&s.jsx("p",{className:"text-sm text-gray-500",children:e.details})]},t))]})]})})})]}):null,et=({page:e,totalPages:t,onNext:a,onPrevious:r})=>s.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-neutral-950/95 backdrop-blur-xl \n                border-t border-neutral-800/50 p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:r,disabled:1===e,className:"p-2 rounded-xl bg-gray-800/50 text-gray-400\n                disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(V,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-gray-400",children:["صفحة ",e," من ",t]}),s.jsx("button",{onClick:a,disabled:e===t,className:"p-2 rounded-xl bg-gray-800/50 text-gray-400\n                disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(J,{className:"w-5 h-5"})})]})}),tt=()=>s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(h,{className:"w-8 h-8 text-blue-500 animate-spin"})}),st=()=>s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 \n                      flex items-center justify-center mb-8 shadow-2xl shadow-black/20 border border-neutral-800/50",children:s.jsx(o,{className:"w-12 h-12 text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"لا يوجد عملاء"}),s.jsx("p",{className:"text-neutral-400 text-lg max-w-md mx-auto leading-relaxed",children:"لم يتم العثور على عملاء يطابقون معايير البحث"})]}),at=()=>{const{slides:t,loading:a,errors:r,createSlide:l,updateSlide:n,deleteSlide:i,toggleSlideStatus:o,resetError:d}=(()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[l,n]=e.useState({slides:!1,create:!1,update:!1,delete:!1,status:!1}),[i,o]=e.useState({slides:null,create:null,update:null,delete:null}),{apiCall:d}=le(),c=e.useRef([]),u=e.useCallback(e=>{o(t=>({...t,[e]:null}))},[]),x=e.useCallback(e=>{const t=["title","productId"].filter(t=>!e[t]);return t.length>0?{isValid:!1,error:`Missing required fields: ${t.join(", ")}`}:{isValid:!0}},[]),m=e.useCallback(e=>{const t=new FormData;return Object.entries(e).forEach(([e,s])=>{null!=s&&("image"===e&&s instanceof File?t.append("image",s):"image"!==e&&t.append(e,s))}),t},[]),h=e.useCallback(async()=>{n(e=>({...e,slides:!0})),u("slides");try{const e=await d("/admin/slides");return e?(s(e),c.current=e):s([]),e}catch(e){return o(t=>({...t,slides:e.message})),s([]),null}finally{n(e=>({...e,slides:!1}))}},[d,u]),p=e.useCallback(async e=>{n(e=>({...e,create:!0})),u("create");const t=x(e);if(!t.isValid)return o(e=>({...e,create:t.error})),n(e=>({...e,create:!1})),null;try{const t=m(e),s=await d("/admin/slides",{method:"POST",body:t});return s&&await h(),s}catch(s){return o(e=>({...e,create:s.message})),null}finally{n(e=>({...e,create:!1}))}},[d,h,x,m,u]),b=e.useCallback(async(e,a)=>{n(e=>({...e,update:!0})),u("update");const r=[...t],l=t.findIndex(t=>t.id===e);try{let n,i={};if(a.image instanceof File?n=m(a):(n=JSON.stringify(a),i={"Content-Type":"application/json"}),-1!==l&&!(a.image instanceof File)){const e={...t[l],...a},r=[...t];r[l]=e,s(r)}const o=await d(`/admin/slides/${e}`,{method:"PUT",headers:i,body:n});return o?(await h(),o):(s(r),null)}catch(i){return s(r),o(e=>({...e,update:i.message})),null}finally{n(e=>({...e,update:!1}))}},[d,t,h,m,u]),g=e.useCallback(async e=>{n(e=>({...e,delete:!0})),u("delete");const a=[...t];try{s(t.filter(t=>t.id!==e));const r=await d(`/admin/slides/${e}`,{method:"DELETE"});if(!r)throw s(a),new Error("Failed to delete slide");return r}catch(r){return s(a),o(e=>({...e,delete:r.message})),null}finally{n(e=>({...e,delete:!1}))}},[d,t,u]),j=e.useCallback(async e=>{n(e=>({...e,status:!0})),u("update");const a=t.findIndex(t=>t.id===e);if(-1===a)return;const r=t[a],l="active"===r.status?"inactive":"active",i=[...t];try{const n=[...t];n[a]={...r,status:l},s(n);const o=await d(`/admin/slides/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:l})});if(!o)throw s(i),new Error("Failed to update slide status");return o}catch(c){return s(i),o(e=>({...e,update:c.message})),null}finally{n(e=>({...e,status:!1}))}},[d,t,u]);return e.useEffect(()=>{h()},[h]),{slides:t,selectedSlide:a,loading:l,errors:i,setSelectedSlide:r,loadSlides:h,createSlide:p,updateSlide:b,deleteSlide:g,toggleSlideStatus:j,resetError:u}})(),{products:c,loading:u}=ne(),[x,m]=e.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",dir:"rtl",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",children:"إدارة العروض"}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[t&&Array.isArray(t)?t.length:0," عرض"]})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"إدارة العروض"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"إدارة العروض التقديمية للمنتجات"})]}),s.jsxs(oe,{onClick:()=>{m(!0),d("create")},variant:"primary",size:"md",children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:"إضافة عرض"})]})]})}),s.jsx("div",{className:"md:hidden sticky top-0 z-30 bg-neutral-950/95 backdrop-blur-sm p-4 border-b border-neutral-800/50",children:s.jsxs(oe,{onClick:()=>{m(!0),d("create")},variant:"primary",size:"md",fullWidth:!0,children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:"إضافة عرض جديد"})]})}),s.jsx("div",{className:"p-4 md:p-6",children:a.slides?s.jsx(dt,{}):r.slides?s.jsx(ct,{message:r.slides}):t&&Array.isArray(t)&&0!==t.length?s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6",children:t.map(e=>s.jsx(lt,{slide:e,onDelete:i,onUpdate:n,onToggleStatus:o,products:c,loading:a,errors:r,resetError:d},e.id))}):s.jsx(ut,{})}),x&&s.jsx(nt,{onClose:()=>{m(!1),d("create")},onCreate:async e=>{await l(e)&&m(!1)},products:c,isLoading:a.create||u,error:r.create})]})},rt=({checked:e,onChange:t,disabled:a})=>s.jsxs("button",{onClick:t,disabled:a,className:"relative inline-flex items-center gap-3",children:[s.jsx("div",{className:`\n        w-10 h-5 rounded-full transition-colors duration-200 ml-[-48px]\n        ${e?"bg-green-500":"bg-neutral-700"}\n        ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n      `,children:s.jsx("div",{className:`\n          absolute w-5 h-5 ml-6 bg-white rounded-full shadow transition-transform duration-200 transform\n          ${e?"translate-x-4 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}\n          ${a?"cursor-not-allowed":"cursor-pointer"}\n        `,children:a&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(h,{className:"w-3 h-3 text-primary-500 animate-spin"})})})}),s.jsx("span",{className:`\n        text-sm transition-colors duration-200\n        ${e?"text-green-400":"text-neutral-400"}\n        ${a?"opacity-50":""}\n      `,children:e?"نشط":"غير نشط"})]}),lt=({slide:t,onDelete:a,onUpdate:r,onToggleStatus:l,products:i,loading:o,errors:d,resetError:c})=>{const[u,x]=e.useState(!1),[m,h]=e.useState(!1),p=i.find(e=>e.id===t.productId);return s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl border border-neutral-700/50 overflow-hidden hover:border-primary-500/30 transition-all duration-300 group",children:[s.jsxs("div",{className:"relative aspect-video w-full rounded-t-2xl overflow-hidden",children:[s.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300\n                    group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("active"===t.status?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-neutral-800/60 text-neutral-400 border border-neutral-600/30"),children:"active"===t.status?"نشط":"غير نشط"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-bold text-white text-lg leading-tight",children:t.title}),t.description&&s.jsx("p",{className:"text-sm text-neutral-400 line-clamp-2 leading-relaxed",children:t.description}),p&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4 text-primary-400"}),s.jsx("span",{className:"text-sm text-neutral-300 truncate",children:p.name})]}),s.jsx("div",{className:"pt-2",dir:"ltr",children:s.jsx(rt,{checked:"active"===t.status,onChange:()=>l(t.id),disabled:o.status})})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(oe,{onClick:()=>{h(!0),c("update")},variant:"secondary",size:"sm",className:"flex-1",children:"تعديل"}),s.jsx(oe,{onClick:async()=>{await a(t.id)&&x(!1)},disabled:o.delete,variant:"danger",size:"sm",loading:o.delete,className:"flex-1",children:o.delete?"جاري الحذف...":"حذف"})]}),d.delete&&s.jsx("p",{className:"text-sm text-red-400 text-center mt-2",children:d.delete})]}),m&&s.jsx(ot,{slide:t,onClose:()=>{h(!1),c("update")},onUpdate:async e=>{await r(t.id,e)&&h(!1)},products:i,isLoading:o.update,error:d.update})]})},nt=({onClose:t,onCreate:a,products:r,isLoading:l,error:n})=>{const[i,o]=e.useState({title:"",description:"",productId:"",image:null}),[d,c]=e.useState(null),[u,x]=e.useState("");return s.jsxs(ve,{isOpen:!0,onClose:t,title:"إضافة عرض جديد",size:"default",children:[(n||u)&&s.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 text-red-500",children:n||u}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i.image?i.title.trim()&&i.productId?await a(i)&&t():x("Please fill in all required fields"):x("Please select an image")},className:"space-y-6",children:[s.jsx(Ne,{label:"الصورة",required:!0,children:s.jsx(it,{imagePreview:d,onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void x("Please select a valid image file");if(t.size>5242880)return void x("Image size should be less than 5MB");o(e=>({...e,image:t})),c(URL.createObjectURL(t)),x("")}},inputId:"create-slide-image"})}),s.jsx(ye,{name:"العنوان",value:Pe(i.title),onChange:e=>o(t=>({...t,title:e.target.value})),placeholder:"",hint:"عنوان العرض",required:!0}),s.jsx(Ce,{name:"الوصف",value:Pe(i.description),onChange:e=>o(t=>({...t,description:e.target.value})),placeholder:"",hint:"وصف العرض",rows:3}),s.jsx(we,{name:"المنتج",value:Pe(i.productId),onChange:e=>o(t=>({...t,productId:e})),options:r.map(e=>({value:e.id,label:e.name})),placeholder:"",hint:"اختر منتج",required:!0}),s.jsxs(ke,{className:"pt-6 border-t border-neutral-800/50",children:[s.jsx(oe,{type:"button",onClick:t,variant:"secondary",size:"md",children:"إلغاء"}),s.jsx(oe,{type:"submit",disabled:l,variant:"primary",size:"md",loading:l,children:l?"جاري الإنشاء...":"إنشاء"})]})]})]})},it=({imagePreview:e,onChange:t,inputId:a})=>s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:t,className:"hidden",id:a}),s.jsx("label",{htmlFor:a,className:"block w-full aspect-video rounded-xl border-2 border-dashed\n               border-neutral-700/50 hover:border-blue-500/50 transition-colors\n               cursor-pointer overflow-hidden",children:e?s.jsx("img",{src:e,alt:"Preview",className:"w-full h-full object-cover"}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx(K,{className:"w-8 h-8 text-neutral-400 mb-2"}),s.jsx("span",{className:"text-sm text-neutral-400",children:"اختر صورة أو اسحبها هنا"})]})})]}),ot=({slide:t,onClose:a,onUpdate:r,products:l,isLoading:n,error:i})=>{const[o,d]=e.useState({title:t.title,description:t.description||"",productId:t.productId,image:null}),[c,u]=e.useState(null),[x,m]=e.useState("");return s.jsxs(ve,{isOpen:!0,onClose:a,title:"تعديل العرض",size:"default",children:[(i||x)&&s.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 text-red-500",children:i||x}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o.title.trim()&&o.productId?await r(o)&&a():m("Please fill in all required fields")},className:"space-y-6",children:[s.jsx(Ne,{label:"الصورة",required:!0,children:s.jsx(it,{imagePreview:c||t.imageUrl,onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void m("Please select a valid image file");if(t.size>5242880)return void m("Image size should be less than 5MB");d(e=>({...e,image:t})),u(URL.createObjectURL(t)),m("")}},inputId:"edit-slide-image"})}),s.jsx(ye,{name:"العنوان",value:Pe(o.title),onChange:e=>d(t=>({...t,title:e.target.value})),placeholder:"",hint:"عنوان العرض",required:!0}),s.jsx(Ce,{name:"الوصف",value:Pe(o.description),onChange:e=>d(t=>({...t,description:e.target.value})),placeholder:"",hint:"وصف العرض",rows:3}),s.jsx(we,{name:"المنتج",value:Pe(o.productId),onChange:e=>d(t=>({...t,productId:e})),options:l.map(e=>({value:e.id,label:e.name})),placeholder:"",hint:"اختر منتج",required:!0}),o.productId&&s.jsx("div",{className:"bg-neutral-800/30 rounded-xl p-4",children:s.jsx(xt,{product:l.find(e=>e.id===o.productId)})}),s.jsxs(ke,{className:"pt-6 border-t border-neutral-800/50",children:[s.jsx(oe,{type:"button",onClick:a,variant:"secondary",size:"md",children:"إلغاء"}),s.jsx(oe,{type:"submit",disabled:n,variant:"primary",size:"md",loading:n,children:n?"جاري الحفظ...":"حفظ"})]})]})]})},dt=()=>s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(h,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto"}),s.jsx("p",{className:"text-neutral-400",children:"جاري تحميل العروض..."})]})}),ct=({message:e})=>s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"حدث خطأ"}),s.jsx("p",{className:"text-neutral-400",children:e})]}),ut=()=>s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 \n                  flex items-center justify-center mb-8 shadow-2xl shadow-black/20 border border-neutral-800/50",children:s.jsx(K,{className:"w-12 h-12 text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"لا توجد عروض"}),s.jsx("p",{className:"text-neutral-400 text-lg max-w-md mx-auto leading-relaxed",children:"ابدأ بإضافة عروض جديدة لعرضها للعملاء"})]}),xt=({product:e})=>{if(!e)return null;const t=e.variants[0],a=t?.images[0];return s.jsxs("div",{className:"flex items-start gap-3",children:[a&&s.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:s.jsx("img",{src:a,alt:e.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-white truncate",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("span",{className:"text-sm text-neutral-400",children:[e.variants.length," ",1===e.variants.length?"لون":"ألوان"]}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[e.variants.reduce((e,t)=>e+t.sizes.length,0)," مقاسات"]})]})]})]})},mt=()=>{const{coupons:t,totalCoupons:a,selectedCoupon:r,couponStats:n,page:i,totalPages:d,filters:c,isLoading:u,isCreating:x,isUpdating:m,isDeleting:h,isLoadingStats:b,error:g,setSelectedCoupon:v,updateFilters:f,createCoupon:N,updateCoupon:y,deleteCoupon:C,nextPage:k,previousPage:S}=(()=>{const[t,s]=e.useState([]),[a,r]=e.useState(0),[l,n]=e.useState(null),[i,o]=e.useState(null),[d,c]=e.useState(1),[u,x]=e.useState(0),[m,h]=e.useState(20),[p,b]=e.useState({status:"",search:"",type:"all",isSpecific:null}),g={ALL:"all",ACTIVE:"active",EXPIRED:"expired",PERCENTAGE:"percentage",FIXED:"fixed"},[j,v]=e.useState(!1),[f,N]=e.useState(!1),[y,w]=e.useState(!1),[C,k]=e.useState(!1),[S,P]=e.useState(!1),[E,$]=e.useState(null),[D,z]=e.useState(null),{apiCall:L}=le(),U=e.useCallback(async(e=d)=>{v(!0),$(null);try{const t={...p,type:p.type===g.ALL?"":p.type},a=new URLSearchParams({page:e,perPage:m,...t}).toString(),l=await L(`/admin/coupons?${a}`);return l&&(s(l.coupons),r(l.total),x(l.pages)),l}catch(t){return $(t.message),null}finally{v(!1)}},[L,d,m,p]),O=async()=>{P(!0),z(null);try{const e=await L("/admin/coupons/stats");return e&&o(e),e}catch(e){return z(e.message),null}finally{P(!1)}},I=e.useCallback(e=>{b(t=>({...t,...e})),c(1)},[]),F=e.useCallback(()=>{d<u&&c(e=>e+1)},[d,u]),R=e.useCallback(()=>{d>1&&c(e=>e-1)},[d]);return e.useEffect(()=>{U()},[d,p,U]),e.useEffect(()=>{O();const e=setInterval(O,3e5);return()=>clearInterval(e)},[]),{coupons:t,totalCoupons:a,selectedCoupon:l,couponStats:i,COUPON_TYPES:g,page:d,totalPages:u,perPage:m,filters:p,isLoading:j,isCreating:f,isUpdating:y,isDeleting:C,isLoadingStats:S,error:E,statsError:D,setSelectedCoupon:n,setPage:c,setPerPage:h,updateFilters:I,loadCoupons:U,createCoupon:async e=>{N(!0),$(null);try{const t=await L("/admin/coupons",{method:"POST",body:JSON.stringify(e)});return await U(),t}catch(t){throw $(t.message),t}finally{N(!1)}},updateCoupon:async(e,t)=>{w(!0),$(null);try{const s=await L(`/admin/coupons/${e}`,{method:"PUT",body:JSON.stringify(t)});return await U(),s}catch(s){throw $(s.message),s}finally{w(!1)}},deleteCoupon:async e=>{k(!0),$(null);try{const t=await L(`/admin/coupons/${e}`,{method:"DELETE"});return await U(),t}catch(t){throw $(t.message),t}finally{k(!1)}},loadCouponStats:O,nextPage:F,previousPage:R}})(),[P,E]=e.useState(!1),[$,O]=e.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-neutral-950 pb-20",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",dir:"rtl",children:"القسائم"}),s.jsxs("span",{className:"text-sm text-neutral-400",children:[a," قسيمة"]})]}),s.jsx("div",{className:"hidden md:block bg-gradient-to-b from-neutral-950/95 to-neutral-950 border-b border-neutral-800/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"إدارة القسائم"}),s.jsx("p",{className:"text-neutral-400 mt-1",children:"إنشاء وإدارة قسائم الخصم والعروض الترويجية"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("span",{className:"text-sm text-neutral-400",children:["إجمالي القسائم: ",a]})})]})}),n&&!b&&s.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4",children:[s.jsx(ce,{title:"القسائم النشطة",value:n.activeCoupons||0,icon:H,color:"success"}),s.jsx(ce,{title:"إجمالي التوفير",value:`${(n.totalDiscountGiven||0).toLocaleString("ar-EG")} جنيه`,icon:l,color:"primary"}),s.jsx(ce,{title:"معدل الاستخدام",value:`${((n.totalUsedCoupons||0)/Math.max(n.totalCoupons||1,1)*100).toFixed(1)}%`,icon:D,color:"warning"}),s.jsx(ce,{title:"قسائم منتهية",value:n.expiredCoupons||0,icon:U,color:"danger"})]}),s.jsxs("div",{className:"sticky top-0 z-30 bg-neutral-950/95 backdrop-blur-sm p-4 space-y-4 border-b border-neutral-800/50",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:c.search,onChange:e=>f({search:e.target.value}),placeholder:"",className:"w-full h-12 !bg-neutral-800/70 rounded-xl px-12 !text-white text-right\n                     !border-neutral-700/50 focus:!border-blue-500/50\n                     focus:ring-2 focus:ring-blue-500/50\n                     placeholder:!text-neutral-500",style:{backgroundColor:"rgb(38 38 38 / 0.7)",color:"white",borderColor:"rgb(64 64 64 / 0.5)"},dir:"rtl"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-neutral-500",children:"ابحث برمز القسيمة أو رقم الهاتف..."}),s.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),c.search&&s.jsx("button",{onClick:()=>f({search:""}),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full\n                       hover:bg-neutral-700/50 transition-colors",children:s.jsx(p,{className:"w-4 h-4 text-neutral-400"})})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar py-2",dir:"rtl",children:[{id:"all",label:"الكل",icon:H},{id:"active",label:"نشط",icon:L},{id:"expired",label:"منتهي",icon:z},{id:"percentage",label:"نسبة مئوية",icon:Q},{id:"fixed",label:"قيمة ثابتة",icon:X},{id:"specific",label:"مستخدمين محددين",icon:o}].map(({id:e,label:t,icon:a})=>s.jsxs("button",{onClick:()=>f({type:e}),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm\n                       whitespace-nowrap transition-colors\n                       "+(c.type===e?"bg-blue-500 text-white":"bg-neutral-800/50 text-neutral-400 hover:bg-neutral-700/50"),children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:t})]},e))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>E(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl\n                     bg-blue-500 text-white font-medium hover:bg-blue-600\n                     transition-colors",children:[s.jsx(j,{className:"w-5 h-5"}),s.jsx("span",{children:"إنشاء قسيمة"})]}),s.jsx("button",{onClick:()=>O(!0),className:"p-3 rounded-xl bg-neutral-800/50 text-neutral-400\n                     hover:bg-neutral-700/50 transition-colors",children:s.jsx(Y,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"p-4 space-y-4",children:u?s.jsx(ft,{}):g?s.jsx(Nt,{message:g}):t&&0!==t.length?t.map(e=>s.jsx(pt,{coupon:e,onClick:()=>v(e),onEdit:()=>{},onDelete:()=>C(e.id)},e.id)):s.jsx(yt,{})}),P&&s.jsx(bt,{isOpen:P,onClose:()=>E(!1),onCreate:N,isCreating:x}),r&&s.jsx(gt,{coupon:r,isOpen:!!r,onClose:()=>v(null),onUpdate:y,onDelete:C,isUpdating:m,isDeleting:h}),$&&s.jsx(jt,{stats:n,isOpen:$,onClose:()=>O(!1),isLoading:b}),d>1&&s.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-neutral-900/95 backdrop-blur-xl \n                      border-t border-neutral-800/50 p-4",children:s.jsxs("div",{className:"flex justify-between items-center max-w-lg mx-auto",children:[s.jsx("button",{onClick:S,disabled:i<=1,className:"p-2 rounded-xl bg-neutral-800/50 text-neutral-400\n                      disabled:opacity-50 disabled:cursor-not-allowed\n                      hover:bg-neutral-700/50 transition-colors",children:"السابق"}),s.jsxs("span",{className:"text-neutral-400",children:["صفحة ",i," من ",d]}),s.jsx("button",{onClick:k,disabled:i>=d,className:"p-2 rounded-xl bg-neutral-800/50 text-neutral-400\n                      disabled:opacity-50 disabled:cursor-not-allowed\n                      hover:bg-neutral-700/50 transition-colors",children:"التالي"})]})})]})},ht=({title:e,value:t,icon:a,color:r})=>s.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-4 \n                 bg-${r}-500/10 border border-${r}-500/20`,children:[s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(a,{className:`w-6 h-6 text-${r}-500`})}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-sm font-medium text-neutral-400",children:e}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:`text-2xl font-bold text-${r}-500`,children:t})})]})]}),pt=({coupon:e,onClick:t,onEdit:a,onDelete:r})=>{const l=new Date(e.endDate)<new Date,n="active"===e.status&&!l;return s.jsxs("div",{onClick:t,className:"group bg-neutral-800/30 rounded-2xl p-4 space-y-4 cursor-pointer\n               border border-neutral-700/50 hover:border-blue-500/30\n               transition-all duration-300",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm\n                      "+(n?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:[n?s.jsx(L,{className:"w-4 h-4"}):s.jsx(z,{className:"w-4 h-4"}),s.jsx("span",{children:n?"نشط":"منتهي"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:async t=>{t.stopPropagation();try{await navigator.clipboard.writeText(e.code)}catch(s){}},className:"p-1 rounded-lg bg-neutral-800/50 hover:bg-blue-500/10\n                       border border-transparent hover:border-blue-500/30\n                       transition-all duration-300",children:s.jsx(F,{className:"w-4 h-4 text-blue-500"})}),s.jsx("h3",{className:"font-bold text-white group-hover:text-blue-500\n                         transition-colors",children:e.code||"غير محدد"})]}),s.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:e.endDate?new Date(e.endDate).toLocaleDateString("ar-EG"):"غير محدد"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-neutral-700/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:["percentage"===e.discountType?s.jsx(Q,{className:"w-5 h-5 text-blue-500"}):s.jsx(X,{className:"w-5 h-5 text-blue-500"}),s.jsxs("span",{className:"text-white font-medium",children:[e.discountValue||0,"percentage"===e.discountType?"%":" جنيه"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-neutral-400",children:[s.jsx(o,{className:"w-5 h-5"}),s.jsxs("span",{children:[e.usedCount||0,"/",e.maxUses||"∞"]})]})]})]})},bt=({isOpen:t,onClose:a,onCreate:r,isCreating:l})=>{const[n,i]=e.useState({code:"",discountType:"percentage",discountValue:"",maxUses:"",startDate:(new Date).toISOString().split("T")[0],endDate:"",specificUsers:[]});return s.jsx(ve,{isOpen:t,onClose:a,title:"إنشاء قسيمة جديدة",size:"default",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await r(n),a()}catch(t){}},className:"space-y-6",children:[s.jsx(ye,{name:"رمز القسيمة",value:Pe(n.code),onChange:e=>i({...n,code:e.target.value.toUpperCase()}),placeholder:"",hint:"اتركه فارغاً لإنشاء رمز تلقائي",className:"text-left"}),s.jsxs(Se,{cols:2,children:[s.jsx(we,{name:"نوع الخصم",value:Pe(n.discountType,"percentage"),onChange:e=>i({...n,discountType:e.target.value}),options:[{value:"percentage",label:"نسبة مئوية"},{value:"fixed",label:"قيمة ثابتة"}],required:!0}),s.jsx(Ne,{label:"قيمة الخصم",hint:"percentage"===n.discountType?"النسبة المئوية":"القيمة بالجنيه",required:!0,children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:Pe(n.discountValue,0),onChange:e=>i({...n,discountValue:e.target.value}),placeholder:"",className:"w-full h-12 bg-neutral-800/70 rounded-xl px-4 pr-12 text-white\n                                     border border-neutral-700/50 focus:border-blue-500/50\n                                     focus:ring-2 focus:ring-blue-500/50 placeholder:text-neutral-500"}),s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:"percentage"===n.discountType?"%":"جنيه"})]})})]}),s.jsx(ye,{name:"الحد الأقصى للاستخدام",type:"number",value:Pe(n.maxUses,0),onChange:e=>i({...n,maxUses:e.target.value}),placeholder:"",hint:"اتركه فارغاً للاستخدام غير المحدود"}),s.jsxs(Se,{cols:2,children:[s.jsx(ye,{name:"تاريخ البدء",type:"date",value:Pe(n.startDate),onChange:e=>i({...n,startDate:e.target.value}),required:!0}),s.jsx(ye,{name:"تاريخ الانتهاء",type:"date",value:Pe(n.endDate),onChange:e=>i({...n,endDate:e.target.value}),hint:"اتركه فارغاً للاستخدام الدائم"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium text-neutral-400",children:"مستخدمين محددين"}),s.jsx("button",{type:"button",onClick:()=>i({...n,specificUsers:[...n.specificUsers,{phone:"",maxUses:""}]}),className:"text-sm text-blue-500 hover:text-blue-400 transition-colors",children:"إضافة مستخدم"})]}),n.specificUsers.map((e,t)=>s.jsxs("div",{className:"flex gap-4",children:[s.jsx("input",{type:"tel",value:e.phone,onChange:e=>{const s=[...n.specificUsers];s[t].phone=e.target.value,i({...n,specificUsers:s})},placeholder:"",className:"flex-1 h-12 bg-neutral-800/70 rounded-xl px-4 text-white\n                             border border-neutral-700/50 focus:border-blue-500/50\n                             focus:ring-2 focus:ring-blue-500/50 placeholder:text-neutral-500",dir:"ltr"}),s.jsx("input",{type:"number",value:e.maxUses,onChange:e=>{const s=[...n.specificUsers];s[t].maxUses=e.target.value,i({...n,specificUsers:s})},placeholder:"",className:"w-32 h-12 bg-neutral-800/70 rounded-xl px-4 text-white\n                             border border-neutral-700/50 focus:border-blue-500/50\n                             focus:ring-2 focus:ring-blue-500/50 placeholder:text-neutral-500"}),s.jsx("button",{type:"button",onClick:()=>{const e=n.specificUsers.filter((e,s)=>s!==t);i({...n,specificUsers:e})},className:"p-3 rounded-xl bg-red-500/10 text-red-500\n                             hover:bg-red-500/20 transition-colors",children:s.jsx(p,{className:"w-6 h-6"})})]},t))]}),s.jsxs(ke,{className:"pt-6 border-t border-neutral-800/50",children:[s.jsx(oe,{type:"button",onClick:a,variant:"secondary",size:"md",children:"إلغاء"}),s.jsx(oe,{type:"submit",disabled:l,variant:"primary",size:"md",loading:l,children:l?"جاري الإنشاء...":"إنشاء القسيمة"})]})]})})},gt=({coupon:t,isOpen:a,onClose:r,onUpdate:l,onDelete:n,isUpdating:i,isDeleting:d})=>{const[c,u]=e.useState(!1),[x,m]=e.useState(t);return s.jsx(vt,{isOpen:a,onClose:r,children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:r,className:"p-2 -m-2 rounded-full hover:bg-neutral-800/50 transition-colors",children:s.jsx(g,{className:"w-6 h-6 text-neutral-400"})}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"تفاصيل القسيمة"}),s.jsx("button",{onClick:()=>u(!c),className:"p-2 -m-2 rounded-full hover:bg-neutral-800/50 transition-colors",children:s.jsx(P,{className:"w-6 h-6 text-neutral-400"})})]}),c?s.jsx("form",{onSubmit:async e=>{e.preventDefault();try{await l(t.id,x),u(!1)}catch(s){}},className:"space-y-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"submit",disabled:i,className:"flex-1 p-4 rounded-xl bg-blue-500 text-white font-medium\n                           hover:bg-blue-600 transition-colors disabled:opacity-50\n                           disabled:cursor-not-allowed",children:i?s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(h,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:"جاري التحديث..."})]}):"حفظ التغييرات"}),s.jsx("button",{type:"button",onClick:()=>u(!1),className:"p-4 rounded-xl bg-neutral-800/50 text-neutral-400\n                           hover:bg-neutral-700/50 transition-colors",children:"إلغاء"})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-neutral-800/30 rounded-2xl p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t.code)}catch(e){}},className:"p-2 rounded-xl bg-neutral-800/50 hover:bg-blue-500/10\n                             border border-transparent hover:border-blue-500/30\n                             transition-all duration-300",children:s.jsx(F,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("div",{className:"text-right",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:t.code}),s.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"رمز القسيمة"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:["percentage"===t.discountType?s.jsx(Q,{className:"w-5 h-5 text-blue-500"}):s.jsx(X,{className:"w-5 h-5 text-blue-500"}),s.jsxs("span",{className:"text-lg font-bold text-white",children:[t.discountValue,"percentage"===t.discountType?"%":" جنيه"]})]}),s.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"قيمة الخصم"})]}),s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-blue-500"}),s.jsxs("span",{className:"text-lg font-bold text-white",children:[t.usedCount,"/",t.maxUses||"∞"]})]}),s.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"عدد مرات الاستخدام"})]})]}),s.jsx("div",{className:"bg-neutral-800/30 rounded-2xl p-4 space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(_,{className:"w-5 h-5 text-blue-500 mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-white",children:"المدة الزمنية"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-neutral-400",children:"تاريخ البدء:"}),s.jsx("span",{className:"text-white",children:new Date(t.startDate).toLocaleDateString("ar-EG")})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-neutral-400",children:"تاريخ الانتهاء:"}),s.jsx("span",{className:"text-white",children:new Date(t.endDate).toLocaleDateString("ar-EG")})]})]})]})]})}),s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl p-4 space-y-4",children:[s.jsx("h4",{className:"font-medium text-white",children:"إحصائيات الاستخدام"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"إجمالي التوفير"}),s.jsxs("p",{className:"text-lg font-bold text-blue-500",children:[t.totalDiscountGiven?.toLocaleString("ar-EG")," جنيه"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"متوسط التوفير"}),s.jsxs("p",{className:"text-lg font-bold text-blue-500",children:[(t.totalDiscountGiven/t.usedCount||0).toLocaleString("ar-EG")," جنيه"]})]})]})]}),t.recentUsage?.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-white",children:"آخر الاستخدامات"}),s.jsx("div",{className:"space-y-3",children:t.recentUsage.map((e,t)=>s.jsxs("div",{className:"bg-neutral-800/30 rounded-xl p-3 flex justify-between items-center",children:[s.jsxs("span",{className:"text-blue-500 font-medium",children:[e.discountAmount.toLocaleString("ar-EG")," جنيه"]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-white",children:e.orderId}),s.jsx("p",{className:"text-xs text-neutral-400",children:new Date(e.usedAt).toLocaleString("ar-EG")})]})]},t))})]}),t.specificUsers?.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-white",children:"المستخدمون المحددون"}),s.jsx("div",{className:"space-y-3",children:t.specificUsers.map((e,t)=>s.jsxs("div",{className:"bg-neutral-800/30 rounded-xl p-3 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-blue-500"}),s.jsxs("span",{className:"text-white",children:[e.usedCount,"/",e.maxUses||"∞"]})]}),s.jsx("span",{className:"text-neutral-400 dir-ltr",children:e.phone})]},t))})]}),s.jsx("button",{onClick:async()=>{if(window.confirm("هل أنت متأكد من حذف هذه القسيمة؟"))try{await n(t.id),r()}catch(e){}},disabled:d,className:"w-full p-4 rounded-xl bg-red-500/10 text-red-500\n                         hover:bg-red-500/20 transition-colors disabled:opacity-50\n                         disabled:cursor-not-allowed",children:d?s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(h,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:"جاري الحذف..."})]}):"حذف القسيمة"})]})]})})},jt=({stats:e,isOpen:t,onClose:a,isLoading:r})=>e||r?s.jsx(vt,{isOpen:t,onClose:a,children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:a,className:"p-2 -m-2 rounded-full hover:bg-neutral-800/50 transition-colors",children:s.jsx(g,{className:"w-6 h-6 text-neutral-400"})}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"إحصائيات القسائم"}),s.jsx("div",{className:"w-10"})]}),r?s.jsx(ft,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ht,{title:"القسائم النشطة",value:e.activeCoupons,icon:L,color:"emerald"}),s.jsx(ht,{title:"إجمالي التوفير",value:`${e.totalDiscountGiven.toLocaleString("ar-EG")} جنيه`,icon:$,color:"blue"}),s.jsx(ht,{title:"معدل الاستخدام",value:`${(e.totalUsedCoupons/e.totalCoupons*100).toFixed(1)}%`,icon:D,color:"blue"}),s.jsx(ht,{title:"قسائم منتهية",value:e.expiredCoupons,icon:U,color:"red"})]}),s.jsxs("div",{className:"bg-neutral-800/30 rounded-2xl p-4 space-y-4",children:[s.jsx("h4",{className:"font-medium text-white",children:"توزيع أنواع القسائم"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-neutral-400",children:"نسبة مئوية"}),s.jsx("span",{className:"text-white",children:e.couponsByType.percentage})]}),s.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:e.couponsByType.percentage/e.totalCoupons*100+"%"}})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-neutral-400",children:"قيمة ثابتة"}),s.jsx("span",{className:"text-white",children:e.couponsByType.fixed})]}),s.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:e.couponsByType.fixed/e.totalCoupons*100+"%"}})})]})]})]}),e.recentActivities?.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-white",children:"آخر النشاطات"}),s.jsx("div",{className:"space-y-3",children:e.recentActivities.map((e,t)=>s.jsxs("div",{className:"bg-neutral-800/30 rounded-xl p-3 flex justify-between items-center",children:[s.jsxs("span",{className:"text-blue-500 font-medium",children:[e.discountAmount.toLocaleString("ar-EG")," جنيه"]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-white",children:e.couponCode}),s.jsx("p",{className:"text-xs text-neutral-400 dir-ltr",children:e.userPhone}),s.jsx("p",{className:"text-xs text-neutral-500",children:new Date(e.usedAt).toLocaleString("ar-EG")})]})]},t))})]})]})]})}):null,vt=t.memo(({isOpen:t,onClose:a,children:r})=>(e.useEffect(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),t?s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:a,style:{backdropFilter:"blur(4px)"}}),s.jsx("div",{className:"fixed inset-x-0 bottom-0",style:{transform:"translateY(0)",willChange:"transform"},children:s.jsxs("div",{className:"bg-gradient-to-b from-neutral-950/95 to-neutral-950 \n                        rounded-t-[2.5rem] border-t border-neutral-800/50 shadow-2xl\n                        max-h-[90vh] overflow-y-auto hide-scrollbar",children:[s.jsx("div",{className:"flex justify-center pt-3 pb-1",children:s.jsx("div",{className:"w-12 h-1 rounded-full bg-neutral-700/50"})}),r]})})]}):null)),ft=()=>s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"space-y-4 text-center",children:[s.jsx(h,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto"}),s.jsx("p",{className:"text-neutral-400",children:"جاري تحميل القسائم..."})]})}),Nt=({message:e})=>s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"حدث خطأ"}),s.jsx("p",{className:"text-neutral-400",children:e})]}),yt=()=>s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 \n                      flex items-center justify-center mb-8 shadow-2xl shadow-black/20 border border-neutral-800/50",children:s.jsx(H,{className:"w-12 h-12 text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"لا توجد قسائم"}),s.jsx("p",{className:"text-neutral-400 text-lg max-w-md mx-auto leading-relaxed",children:"قم بإنشاء قسيمة جديدة للبدء"})]}),wt=()=>{const[t,r]=e.useState("analytics"),[l,n]=e.useState(!1),{token:i,isInitialized:o,loading:d,error:c,logout:u,login:x,isAuthenticating:m}=le();if(!o||d)return s.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-6 p-8 rounded-2xl bg-neutral-850/50 backdrop-blur-xl border border-neutral-700/50",children:[s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"w-16 h-16 text-primary-500 animate-spin mx-auto"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-500/20 animate-ping"})]}),s.jsx("p",{className:"text-neutral-300 text-lg font-medium",dir:"rtl",children:"جاري تحميل لوحة التحكم..."})]})});if(c)return s.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center space-y-6 p-8 rounded-2xl bg-neutral-850/50 backdrop-blur-xl border border-neutral-700/50 max-w-md",children:[s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"w-20 h-20 text-danger-500 mx-auto"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-danger-500/20 animate-pulse"})]}),s.jsx("h1",{className:"text-2xl font-bold text-white",dir:"rtl",children:"خطأ في المصادقة"}),s.jsx("p",{className:"text-neutral-400 leading-relaxed",dir:"rtl",children:c||"فشل في تسجيل الدخول كمدير. تأكد من صحة بيانات الاعتماد."}),s.jsxs("p",{className:"text-xs text-neutral-500",dir:"rtl",children:["رقم الهاتف: ","0000000000"]}),s.jsx("button",{onClick:x,disabled:m,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 \n                     disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"جاري تسجيل الدخول...":"تسجيل الدخول مرة أخرى"})]})});if(!i&&o)return s.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center space-y-6 p-8 rounded-2xl bg-neutral-850/50 backdrop-blur-xl border border-neutral-700/50 max-w-md",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:s.jsx(Z,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-white",dir:"rtl",children:"تسجيل الدخول مطلوب"}),s.jsx("p",{className:"text-neutral-400 leading-relaxed",dir:"rtl",children:"يرجى تسجيل الدخول للوصول إلى لوحة التحكم"}),s.jsx("button",{onClick:x,disabled:m,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 \n                     disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"جاري تسجيل الدخول...":"تسجيل الدخول"})]})});const b=[{id:"analytics",icon:Y,label:"التحليلات"},{id:"products",icon:S,label:"المنتجات"},{id:"orders",icon:ee,label:"الطلبات"},{id:"customers",icon:te,label:"العملاء"},{id:"slides",icon:K,label:"العروض"},{id:"coupons",icon:H,label:"كوبون"}];return s.jsxs("div",{className:"min-h-screen bg-neutral-950 text-white overflow-hidden",children:[s.jsx("header",{className:"md:hidden fixed top-0 inset-x-0 z-50 bg-neutral-950/95 backdrop-blur-xl \n                        border-b border-neutral-800/50 shadow-2xl",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx("button",{onClick:u,className:"p-2 rounded-xl bg-neutral-850/50 hover:bg-danger-500/10 \n                     hover:border-danger-500/30 border border-transparent transition-all",children:s.jsx(Z,{className:"w-5 h-5 text-danger-500"})}),s.jsx("h1",{className:"text-lg font-bold text-white",dir:"rtl",children:b.find(e=>e.id===t)?.label||"لوحة التحكم"}),s.jsx("button",{onClick:()=>n(!0),className:"p-2 rounded-xl bg-neutral-850/50 hover:bg-neutral-800/50 transition-colors",children:s.jsx(se,{className:"w-6 h-6 text-neutral-400"})})]})}),s.jsxs("aside",{className:"hidden md:flex fixed right-0 top-0 h-full w-64 bg-neutral-950/95 \n                       backdrop-blur-xl border-l border-neutral-800/50 flex-col z-40 overflow-y-auto hide-scrollbar",children:[s.jsxs("div",{className:"p-6 border-b border-neutral-800/50",children:[s.jsx("h1",{className:"text-xl font-bold text-white",dir:"rtl",children:"لوحة التحكم"}),s.jsx("p",{className:"text-sm text-neutral-400 mt-1",dir:"rtl",children:"إدارة المتجر"})]}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:b.map(({id:e,icon:a,label:l})=>s.jsxs("button",{onClick:()=>r(e),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl\n                       transition-all duration-300 group text-left\n                       "+(t===e?"text-primary-400 bg-primary-500/10 border border-primary-500/20":"text-neutral-400 hover:text-neutral-300 hover:bg-neutral-850/50"),dir:"rtl",children:[s.jsx(a,{className:"w-5 h-5 transition-all duration-300\n                            "+(t===e?"text-primary-400":"group-hover:scale-110")}),s.jsx("span",{className:"font-medium",children:l}),t===e&&s.jsx("div",{className:"ml-auto w-2 h-8 rounded-full bg-gradient-to-b \n                              from-primary-400 to-primary-600"})]},e))}),s.jsx("div",{className:"p-4 border-t border-neutral-800/50",children:s.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl\n                     text-danger-500 hover:bg-danger-500/10 border border-transparent\n                     hover:border-danger-500/30 transition-all duration-300",dir:"rtl",children:[s.jsx(Z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"تسجيل الخروج"})]})})]}),l&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1)}),s.jsxs("nav",{className:"absolute right-0 top-0 h-full w-80 max-w-[85vw] \n                         bg-neutral-950/95 backdrop-blur-xl border-l border-neutral-800/50\n                         transform transition-transform duration-300 overflow-y-auto hide-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-800/50",children:[s.jsx("button",{onClick:()=>n(!1),className:"p-2 rounded-xl hover:bg-neutral-850/50 transition-colors",children:s.jsx(p,{className:"w-6 h-6 text-neutral-400"})}),s.jsx("h2",{className:"text-lg font-bold text-white",dir:"rtl",children:"القائمة"})]}),s.jsx("div",{className:"px-4 py-6 space-y-2",children:b.map(({id:e,icon:a,label:l})=>s.jsxs("button",{onClick:()=>(r(e),void n(!1)),className:"w-full flex items-center gap-3 px-4 py-4 rounded-xl\n                           transition-all duration-300 text-right\n                           "+(t===e?"text-primary-400 bg-primary-500/10 border border-primary-500/20":"text-neutral-400 hover:text-neutral-300 hover:bg-neutral-850/50"),dir:"rtl",children:[s.jsx(a,{className:"w-6 h-6 "+(t===e?"text-primary-400":"")}),s.jsx("span",{className:"font-medium text-lg",children:l})]},e))}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-neutral-800/50",children:s.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl\n                         text-danger-500 hover:bg-danger-500/10 border border-transparent\n                         hover:border-danger-500/30 transition-all duration-300",dir:"rtl",children:[s.jsx(Z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"تسجيل الخروج"})]})})]})]}),s.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-40 bg-neutral-950/95 \n                     backdrop-blur-xl border-t border-neutral-800/50 shadow-2xl",children:s.jsx("div",{className:"flex justify-around py-2 px-2",children:b.map(({id:e,icon:a,label:l})=>s.jsxs("button",{onClick:()=>r(e),className:"flex flex-col items-center gap-1 py-2 px-1 rounded-xl\n                       transition-all duration-300 min-w-0 flex-1 relative\n                       "+(t===e?"text-primary-400 bg-primary-500/10":"text-neutral-500 hover:text-neutral-400 hover:bg-neutral-800/30"),dir:"rtl",children:[s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"w-5 h-5 transition-all duration-300 "+(t===e?"scale-110":"")}),t===e&&s.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-primary-400 animate-pulse"})]}),s.jsx("span",{className:"text-xs font-medium truncate w-full text-center leading-tight",children:l}),t===e&&s.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full bg-gradient-to-r from-primary-400 to-primary-600"})]},e))})}),s.jsx("main",{className:"md:mr-64 pt-16 md:pt-0 pb-24 md:pb-8 min-h-screen\n                     bg-neutral-950 overflow-y-auto hide-scrollbar",children:s.jsx("div",{className:"min-h-screen",dir:"rtl",children:(()=>{switch(t){case"analytics":return s.jsx(ue,{});case"products":return s.jsx($e,{});case"orders":return s.jsx(Re,{});case"customers":return s.jsx(He,{});case"slides":return s.jsx(at,{});case"coupons":return s.jsx(mt,{});default:return s.jsx(Y,{})}})()})})]})};export{wt as default};
