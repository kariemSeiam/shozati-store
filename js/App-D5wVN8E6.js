import{r as e,a6 as t,a8 as a,P as r,a5 as s,a9 as i,a as l,C as n,R as o,S as c,h as d,V as m,I as h,L as u,ae as p,o as y,g,ar as b,aC as x,aa as f,aD as v,aE as w}from"./vendor-react-2emUoSyi.js";import{A as N,c as k,C,b as S,d as T,e as I,f as P,g as j,h as A,u as O,i as L}from"./hooks-Df9au_LQ.js";import{P as F,B as q,a as M,F as z,M as H}from"./components-ACsN5C24.js";import{a as D,j as E,F as V}from"./admin-CMZzfo0K.js";const $=()=>D("svg",{width:"40",height:"40",viewBox:"0 0 40 40",className:"absolute inset-0 w-full h-full opacity-10",children:[E("defs",{children:D("pattern",{id:"premium-pattern",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:[E("circle",{cx:"5",cy:"5",r:"0.5",fill:"currentColor"}),E("circle",{cx:"0",cy:"0",r:"0.3",fill:"currentColor"}),E("circle",{cx:"10",cy:"10",r:"0.3",fill:"currentColor"})]})}),E("rect",{width:"100%",height:"100%",fill:"url(#premium-pattern)"})]}),U=({icon:a,onClick:r,isActive:i,label:l})=>{const[n,o]=e.useState(!1);return D(t.button,{onHoverStart:()=>o(!0),onHoverEnd:()=>o(!1),onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-2xl overflow-hidden group",children:[E("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-primary-50/50 to-white \r backdrop-blur-xl transition-all duration-300"}),E("div",{className:"absolute inset-0 text-primary-500/10",children:E($,{})}),E(t.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-100",animate:{background:n?["linear-gradient(45deg, rgba(59, 130, 246, 0.15) 0%, transparent 100%)","linear-gradient(45deg, transparent 0%, rgba(245, 158, 11, 0.15) 100%)"]:"none"},transition:{duration:2.5,repeat:1/0,repeatType:"reverse"}}),E(t.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-100 rounded-2xl",animate:{boxShadow:n?["inset 0 0 0 1px rgba(59, 130, 246, 0.3), 0 4px 12px rgba(59, 130, 246, 0.1)","inset 0 0 0 1px rgba(245, 158, 11, 0.3), 0 4px 12px rgba(245, 158, 11, 0.1)"]:"none"},transition:{duration:1.8,repeat:1/0,repeatType:"reverse"}}),E(t.div,{animate:{scale:n?1.15:1,rotate:n?[0,8,-8,0]:0,y:n?-2:0},transition:{scale:{duration:.3,ease:"easeOut"},rotate:{duration:.6,ease:"easeInOut"},y:{duration:.2}},className:"relative",children:E(a,{className:"w-6 h-6 transition-all duration-300\n                       "+(n?"text-primary-600 filter drop-shadow-lg":"text-primary-700")})}),l&&E(s,{children:n&&E(t.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 \r text-xs font-medium text-primary-600 whitespace-nowrap",children:l})})]})},R=()=>E(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative px-4",children:D("div",{className:"relative inline-block",children:[E("img",{src:"/logo.png",alt:"Shozati Logo",className:"h-10 w-auto"}),E(t.div,{className:"absolute -inset-2 bg-gradient-to-r from-primary-500/20 via-secondary-400/20 to-primary-500/20 \r blur-xl opacity-0 rounded-full",animate:{opacity:[0,.6,0],scale:[.9,1.1,.9],rotate:[0,5,0]},transition:{duration:4,repeat:1/0,repeatType:"reverse"}})]})}),B=({onOrdersClick:s,onProfileClick:l})=>{const{isAuthenticated:n,login:o}=e.useContext(N),[c,d]=e.useState(!1),[m,h]=e.useState(!1),u=async e=>{n?"orders"===e?s():"profile"===e&&l():d(!0)};return D(t.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-40",children:[E("div",{className:"absolute inset-0 bg-gradient-to-b from-primary-50/95 via-white/90 to-secondary-50/95 \r backdrop-blur-lg shadow-lg shadow-primary-100/50"}),E("div",{className:"relative px-4 py-2",children:D("div",{className:"flex justify-between items-center max-w-6xl mx-auto",children:[E(U,{icon:a,onClick:()=>u("profile"),label:"Profile"}),E(R,{}),E(U,{icon:r,onClick:()=>u("orders"),label:"Orders"})]})}),E(F,{isOpen:c,onClose:()=>d(!1),onVerified:async e=>{h(!0);try{await o(e.phone_number)&&d(!1)}catch(t){throw i.error(t.message||"Login failed"),t}finally{h(!1)}},loading:m,isLogin:!0})]})},X=({onSelect:a})=>{const{slides:r,loading:i,error:o,fetchSlides:c}=k(),[d,m]=e.useState(0),[h,u]=e.useState(!1),[p,y]=e.useState(null),g=e.useRef({start:0,end:0}),b=e.useRef(null),x=e.useRef(null),f=e.useCallback(e=>{let t=e;e<0?t=r?.length-1:e>=r?.length&&(t=0),m(t)},[r?.length]),v=e.useCallback(e=>{y(e),f("right"===e?d-1:d+1),setTimeout(()=>y(null),300)},[d,f]);return e.useEffect(()=>{if(!(!r?.length||r.length<=1||h))return b.current=setInterval(()=>{v("left")},5e3),()=>b.current&&clearInterval(b.current)},[r,h,v]),i?E("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-primary-50",children:E("div",{className:"absolute inset-0 flex items-center justify-center",children:E(l,{className:"w-8 h-8 text-primary-500 animate-spin"})})}):o?E("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-primary-50 flex items-center justify-center",children:D("div",{className:"text-center",children:[E(n,{className:"w-12 h-12 text-rose-500 mx-auto mb-4"}),E("p",{className:"text-slate-700 mb-4",children:"فشل في تحميل المحتوى"}),E("button",{onClick:c,className:"btn-primary",children:"إعادة المحاولة"})]})}):r?.length?E("div",{className:"relative h-48 md:h-96 rounded-xl overflow-hidden bg-gray-50 shadow-md",children:D("div",{ref:x,className:"absolute inset-0 transition-transform duration-300",dir:"rtl",onTouchStart:e=>{u(!0),g.current={start:e.touches[0].clientX,startTime:Date.now(),end:e.touches[0].clientX}},onTouchMove:e=>{g.current.end=e.touches[0].clientX;const t=g.current.start-g.current.end,a=x.current;a&&(a.style.transform=`translateX(${.5*-t}px)`)},onTouchEnd:()=>{u(!1);const e=x.current;e&&(e.style.transform="");const{start:t,end:a,startTime:r}=g.current,s=t-a,i=Date.now()-r,l=Math.abs(s/i);(Math.abs(s)>50||l>.5)&&v(s>0?"left":"right"),g.current={start:0,end:0}},children:[E(s,{initial:!1,mode:"wait",children:r.map((e,r)=>E(t.div,{initial:{opacity:0,x:"left"===p?100:-100},animate:{opacity:r===d?1:0,x:r===d?0:"left"===p?-100:100,transition:{duration:.3}},exit:{opacity:0,x:"left"===p?-100:100},className:"absolute inset-0 cursor-pointer",onClick:()=>a?.(e.product),children:D("div",{className:"relative h-full",children:[E("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",loading:0===r?"eager":"lazy"}),E("div",{className:"absolute"}),D("div",{className:"absolute bottom-0 right-0 p-6 text-right max-w-2xl",children:[E("h3",{className:"text-2xl font-bold text-white mb-2 drop-shadow-lg",children:e.title}),E("p",{className:"text-sm text-gray-100 drop-shadow-md",children:e.description})]})]})},e.id))}),E("div",{className:"absolute bottom-2 inset-x-0 flex justify-center gap-2 z-20",children:r.map((e,a)=>E("button",{onClick:e=>{e.stopPropagation(),f(a)},className:"group","aria-label":`الانتقال إلى الشريحة ${a+1}`,children:E(t.div,{animate:{width:d===a?24:8,opacity:d===a?1:.7},className:"h-2 bg-white rounded-full transition-all duration-300 \r shadow-sm group-hover:opacity-90"})},a))})]})}):null},Q=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),W=o.memo(({item:a,onRemove:i,onUpdateQuantity:l})=>{const[o,c]=e.useState(!1),[m,h]=e.useState(!1),u=e.useCallback(e=>{c(!0),e<1?h(!0):(l(a.cartItemId,e),setTimeout(()=>c(!1),300))},[a.cartItemId,l]),p=e.useCallback(()=>{m?(i(a.cartItemId),h(!1)):h(!0)},[m,a.cartItemId,i]);return D("div",{className:"group relative card p-3 sm:p-4 \r transition-all duration-200",dir:"rtl",children:[m&&E("div",{className:"absolute inset-0 z-20 rounded-2xl \r bg-white/95 backdrop-blur-sm\r flex items-center justify-center\r transition-opacity duration-200",children:D("div",{className:"flex flex-col items-center gap-3 p-4 text-center",children:[E(n,{className:"w-8 h-8 text-red-500"}),E("p",{className:"text-slate-800 font-medium",children:"هل تريد حذف هذا المنتج؟"}),D("div",{className:"flex gap-2 mt-2",children:[E("button",{onClick:p,className:"px-4 py-2 bg-rose-500 text-white rounded-xl\r font-medium hover:bg-rose-600 \r transition-colors duration-200",children:"تأكيد الحذف"}),E("button",{onClick:()=>h(!1),className:"btn-secondary",children:"إلغاء"})]})]})}),E(s,{children:o&&E(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-10 rounded-2xl bg-sky-50/30 \r flex items-center justify-center",children:E("div",{className:"bg-white/90 p-2 rounded-full shadow-lg",children:E(d,{className:"w-5 h-5 text-sky-500"})})})}),D("div",{className:"relative flex gap-3 sm:gap-4",children:[E("div",{className:"relative flex-none w-20 sm:w-28 aspect-square",children:D("div",{className:"relative h-full rounded-xl overflow-hidden \r bg-gradient-to-b from-gray-50 to-white\r ring-1 ring-gray-100 group-hover:ring-sky-100\r transition-all duration-300",children:[E("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover transform transition-all \r duration-500 group-hover:scale-105"}),D(t.div,{layout:!0,className:"absolute bottom-1.5 left-1.5 \r bg-white/95 backdrop-blur-sm\r px-2 py-0.5 text-xs font-semibold\r text-sky-600 rounded-full shadow-md\r ring-1 ring-sky-100",children:["×",a.quantity]})]})}),E(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>!o&&h(!0),className:" absolute left-0 top-0 z-10 flex-left p-2 sm:p-2.5 rounded-xl\r bg-red-50 text-red-500 hover:bg-red-100\r transition-all duration-300\r disabled:opacity-50",disabled:o,"aria-label":"حذف المنتج",children:E(y,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),D("div",{className:"flex-1 min-w-0 flex flex-col justify-between gap-2",children:[D("div",{className:"space-y-1",children:[E("h3",{className:"font-bold text-gray-900 \r group-hover:text-sky-600 \r transition-colors duration-300\r text-sm sm:text-base truncate",children:a.name}),D("div",{className:"flex items-center gap-1.5",children:[E(r,{className:"w-3.5 h-3.5 text-gray-400"}),D("p",{className:"text-xs sm:text-sm text-gray-500",children:[a.size," - ",a.colorName]})]}),D("div",{className:"flex items-baseline gap-1.5",children:[E(t.span,{layout:!0,className:"text-base sm:text-lg font-bold \r bg-gradient-to-l from-sky-600 to-sky-500 \r bg-clip-text text-transparent",children:Q(a.price)}),E("span",{className:"text-xs sm:text-sm text-gray-400",children:"/ القطعة"})]})]}),D("div",{className:"flex justify-between items-end \r pt-2 sm:pt-3 mt-1 sm:mt-2\r border-t border-gray-100",children:[D("div",{className:"flex items-center gap-1 p-1 \r bg-gray-50 rounded-lg \r group-hover:bg-sky-50/50",children:[E(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(a.quantity+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-md bg-white \r text-gray-600 flex items-center justify-center \r shadow-sm hover:bg-sky-50 hover:text-sky-600",disabled:o,children:E(g,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),E(t.div,{layout:!0,className:"w-8 sm:w-10 text-center",children:E("span",{className:"text-gray-800 font-semibold \r text-sm sm:text-base",children:a.quantity})}),E(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(a.quantity-1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-md bg-white \r text-gray-600 flex items-center justify-center \r shadow-sm hover:bg-sky-50 hover:text-sky-600\r disabled:opacity-50 disabled:cursor-not-allowed",disabled:a.quantity<=1||o,children:E(b,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),D("div",{className:"text-right ",children:[E("span",{className:"text-xs sm:text-sm text-gray-500",children:"الإجمالي"}),E(t.div,{layout:!0,className:"text-base sm:text-lg font-bold \r bg-gradient-to-l from-sky-600 to-sky-500 \r bg-clip-text text-transparent",children:Q(a.price*a.quantity)})]})]})]})]})]})}),G=({isProcessing:a,onApplyCoupon:r})=>{const[i,l]=e.useState(""),o=e.useRef(null),{cartTotal:c}=e.useContext(C),{validateCoupon:d,currentCoupon:h,validatingCoupon:p,error:y,clearError:g,calculateDiscount:b,clearCoupon:x}=T();e.useEffect(()=>()=>{x()},[x]);const f=e.useCallback(async e=>{if(e?.preventDefault(),!i.trim()||p||a)return;const t=await d(i,c);if(t){const e=b(c);r({...t,discount:e})}},[i,p,a,d,c,b,r]),v=e.useCallback(e=>{const t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");l(t),y&&g()},[y,g]),w=e.useCallback(()=>{l(""),x(),r(null)},[x,r]);return D("div",{className:"space-y-3",dir:"rtl",children:[D("form",{onSubmit:f,className:"relative group",children:[D("div",{className:"relative",children:[E("input",{ref:o,type:"text",value:i,onChange:v,placeholder:"أدخل كود الخصم",maxLength:8,className:"w-full px-4 py-3 rounded-xl bg-white border border-sky-100\r focus:border-sky-500 focus:ring-2 focus:ring-sky-200\r transition-all duration-300 text-gray-800\r placeholder:text-gray-400 tracking-wide\r disabled:opacity-60 disabled:cursor-not-allowed\r group-hover:border-sky-200",disabled:a||p}),i&&D(t.span,{initial:{opacity:0},animate:{opacity:1},className:"absolute left-28 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:[i.length,"/8"]}),D(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:!i.trim()||a||p,className:"absolute left-2 top-2 px-4 py-1.5 bg-sky-500 text-white rounded-lg\r font-medium hover:bg-sky-600 transition-all duration-300\r disabled:opacity-50 disabled:cursor-not-allowed\r hover:shadow-md hover:shadow-sky-100\r flex items-center gap-2",children:[p?E(u,{className:"w-4 h-4 animate-spin"}):E(m,{className:"w-4 h-4"}),E("span",{children:"تطبيق"})]})]}),E(t.p,{initial:!1,animate:{opacity:i?0:.7},className:"absolute -bottom-6 right-2 text-xs text-gray-500 pointer-events-none",children:"ادخل كود الخصم الخاص بك للحصول على خصم إضافي"})]}),D(s,{mode:"wait",children:[y&&D(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 text-red-600 bg-red-50/80 \r backdrop-blur-sm px-4 py-3 rounded-xl text-sm\r border border-red-100 shadow-sm",children:[E(n,{className:"w-4 h-4"}),E("span",{children:y})]}),h&&D(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center justify-between gap-2 \r bg-emerald-50/80 backdrop-blur-sm px-4 py-3 rounded-xl\r border border-emerald-100 shadow-sm",children:[D("div",{className:"flex items-center gap-3",children:[E("div",{className:"bg-emerald-100 p-2 rounded-lg",children:E(m,{className:"w-5 h-5 text-emerald-600"})}),D("div",{children:[E("p",{className:"font-bold text-emerald-700",children:"percentage"===h.discountType?`خصم ${h.discountValue}%`:`خصم ${Q(h.discountValue)}`}),E("p",{className:"text-sm text-emerald-600",children:"تم تطبيق كود الخصم بنجاح"})]})]}),D("div",{className:"flex flex-col items-end",children:[E("span",{className:"font-bold text-emerald-600",children:Q(b(c))}),E(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:"text-xs text-emerald-600 hover:text-emerald-700\r underline underline-offset-2",children:"إزالة"})]})]})]})]})},_=({orderDetails:a,handleConfirmOrder:r,onBack:s,isLoading:i})=>{const{cartTotal:l,cart:n}=e.useContext(C),{currentCoupon:o}=T(),[c,y]=e.useState(null),{shippingCost:g,discount:b,finalTotal:x,itemsWithDiscount:f}=e.useMemo(()=>{const e=l>500?0:25,t=c||o,a=t?"percentage"===t.discountType?l*t.discountValue/100:t.discountValue:0,r=n.map(e=>{const r=e.price*e.quantity,s=t?"percentage"===t.discountType?r*t.discountValue/100:r/l*a:0;return{...e,originalTotal:r,discountAmount:Math.round(100*s)/100,finalTotal:Math.round(100*(r-s))/100}});return{shippingCost:e,discount:Math.round(100*a)/100,finalTotal:Math.round(100*(l+e-a))/100,itemsWithDiscount:r}},[n,l,o,c]),v=e.useCallback(()=>{r(c?.code||"")},[r,c,l,g,b,x,f]);return D(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 font-arabic",children:[D("div",{className:"bg-gradient-to-br from-white to-sky-50 rounded-3xl p-6 space-y-6\r border border-sky-100 shadow-sm relative overflow-hidden",children:[E("div",{className:"absolute inset-0 opacity-5 bg-repeat"}),D("div",{className:"relative space-y-2",dir:"rtl",children:[E("div",{className:"flex items-center justify-between",children:D("div",{className:"flex items-center gap-3",children:[E("div",{className:"bg-sky-100 rounded-full p-2",children:E(m,{className:"w-5 h-5 text-sky-600"})}),E("h4",{className:"font-bold text-xl text-gray-800",children:"كوبون الخصم"})]})}),E(G,{onApplyCoupon:y,isProcessing:i})]}),D("div",{className:"relative space-y-2 pt-4 border-t border-sky-100",dir:"rtl",children:[D("div",{className:"flex items-center gap-3",children:[E("div",{className:"bg-sky-100 rounded-full p-2",children:E(h,{className:"w-5 h-5 text-sky-600"})}),E("h4",{className:"font-bold text-xl text-gray-800",children:"عنوان التوصيل"})]}),D(t.div,{className:"bg-white rounded-2xl p-5 space-y-3 border border-sky-100 shadow-sm\r hover:shadow-md transition-shadow duration-300",whileHover:{scale:1.01},children:[E("p",{className:"text-gray-800 text-lg leading-relaxed",children:a.address.details}),D("p",{className:"text-gray-500 flex items-center gap-2",children:[E("span",{children:a.address.governorate}),E("span",{className:"text-sky-500",children:"•"}),E("span",{children:a.address.district})]})]})]}),E("div",{className:"relative space-y-4 pt-6 border-t border-sky-100",dir:"rtl",children:D("div",{className:"space-y-4 bg-white rounded-2xl p-5 border border-sky-100",children:[f.map((e,a)=>D("div",{className:"flex justify-between items-start pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[D("div",{className:"space-y-1",children:[D("div",{className:"flex items-center gap-2",children:[E("span",{className:"font-medium text-gray-800",children:e.name}),D("span",{className:"text-gray-500",children:["×",e.quantity]})]}),e.discountAmount>0&&D(t.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-emerald-600",children:["وفرت ",Q(e.discountAmount)]})]}),D("div",{className:"text-left",children:[E("div",{className:"font-bold text-gray-800",children:Q(e.originalTotal)}),e.discountAmount>0&&E(t.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-emerald-600 font-bold",children:Q(e.finalTotal)})]})]},a)),D("div",{className:"space-y-3 pt-4 border-t border-sky-100",children:[D("div",{className:"flex justify-between text-gray-600",children:[E("span",{children:"المجموع الفرعي"}),E("span",{className:"font-bold",children:Q(l)})]}),D("div",{className:"flex justify-between text-gray-600",children:[E("span",{children:"رسوم التوصيل"}),E("span",{className:"font-bold "+(0===g?"text-emerald-600":""),children:0===g?"مجاناً":Q(g)})]}),b>0&&D("div",{className:"flex justify-between text-emerald-600",children:[E("span",{children:"الخصم"}),D("span",{className:"font-bold",children:["- ",Q(b)]})]}),D("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",dir:"ltr",children:[E("span",{className:"text-xl font-bold text-sky-600",children:Q(x)}),E("span",{className:"text-lg text-gray-800",children:"المجموع الكلي"})]})]})]})})]}),D("div",{className:"space-y-3",children:[E(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:i,onClick:v,className:"w-full bg-gradient-to-r from-sky-500 to-sky-600 \r text-white rounded-xl py-4 font-bold text-lg\r disabled:opacity-50 flex items-center justify-center gap-3",children:i?E(u,{className:"w-6 h-6 animate-spin"}):D(V,{children:[E(d,{className:"w-6 h-6"}),E("span",{children:"تأكيد الطلب"})]})}),D(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"w-full bg-gray-100 text-gray-700 rounded-xl py-4 \r font-bold text-lg flex items-center justify-center gap-3",children:[E(p,{className:"w-6 h-6"}),E("span",{children:"العودة للسلة"})]})]})]})},Z=({orderId:e,onViewOrders:a,emptyCart:r})=>D(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-12 space-y-6",children:[E("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-emerald-100 to-emerald-50 mx-auto flex items-center justify-center shadow-md",children:E(t.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:E(d,{className:"w-12 h-12 text-emerald-500"})})}),E("div",{className:"space-y-4",children:E("h3",{className:"text-xl font-bold text-gray-800 p-2",children:"تم تأكيد طلبك بنجاح"})}),E(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{r(),a()},className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl px-8 py-3 font-bold hover:shadow-lg hover:brightness-105 transition-all duration-300",children:"متابعة الطلب"})]}),J=()=>D("div",{className:"text-center py-12 space-y-4 bg-sky-50 rounded-xl",children:[E("div",{className:"w-24 h-24 rounded-full bg-sky-100 mx-auto flex items-center justify-center",children:E(c,{className:"w-12 h-12 text-sky-600"})}),E("h3",{className:"text-xl font-bold text-gray-800",children:"السلة فارغة"}),E("p",{className:"text-gray-600",children:"لم تقم بإضافة أي منتجات للسلة بعد"})]}),K=({onOrderCreated:a,checkAuthAndProceed:r})=>{const{cart:l,isCartOpen:n,setIsCartOpen:o,removeFromCart:d,updateQuantity:m,emptyCart:h}=e.useContext(C),{userInfo:u}=e.useContext(N),{createOrder:p}=S(),[y,g]=e.useState({isProcessing:!1,confirmation:{show:!1,orderId:null,success:!1,total:0},error:null}),b=e.useCallback(()=>{r({requiresAuth:!0,requiresAddress:!0,onSuccess:()=>{g(e=>({...e,confirmation:{show:!0,orderId:null,success:!1,total:0}}))}})},[r]),x=e.useCallback(async e=>{try{g(e=>({...e,isProcessing:!0,error:null}));const t={items:l.map(e=>({variant_id:e.variantId,size:e.size,quantity:e.quantity})),addressId:u.addresses[0].id,coupon:e||0},a=await p(t);a.success?(g(e=>({...e,isProcessing:!1,confirmation:{show:!0,orderId:a.order.id,success:!0,total:a.order.total,coupon:a.order.coupon}})),i.success("تم إنشاء طلبك بنجاح",{style:{background:"#EFF6FF",color:"#1E40AF"}})):(g(e=>({...e,isProcessing:!1,error:a.error})),i.error(a.error))}catch(t){g(e=>({...e,isProcessing:!1,error:t.message})),i.error(t.message)}},[l,u?.addresses,p]),f=e.useCallback(()=>{g(e=>({...e,confirmation:{show:!1,orderId:null,success:!1,total:0}}))},[]),v=e.useCallback(()=>{o(!1),g({isProcessing:!1,confirmation:{show:!1,orderId:null,success:!1,total:0},error:null}),a(y.confirmation.orderId)},[y.confirmation.orderId,a,o]);return E(q,{isOpen:n,onClose:()=>o(!1),title:"سلة التسوق",className:"bg-white",children:E("div",{className:"p-4",children:E(s,{mode:"wait",children:y.confirmation.success?E(Z,{orderId:y.confirmation.orderId,onViewOrders:v,emptyCart:h,className:"bg-white shadow-lg rounded-xl p-6"}):y.confirmation.show?E(_,{orderDetails:{address:u.addresses[0],items:l,error:y.error},handleConfirmOrder:x,onBack:f,isLoading:y.isProcessing,className:"bg-white shadow-lg rounded-xl p-6"}):0===l.length?E(J,{}):D("div",{className:"space-y-6",children:[E("div",{className:"space-y-4",children:l.map(e=>E(W,{item:e,onRemove:d,onUpdateQuantity:m},`${e.id}-${e.variantId}-${e.size}`))}),D(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,className:"w-full bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl py-4 font-bold hover:shadow-lg hover:brightness-105 transition-all duration-300 flex items-center justify-center gap-2",children:[E(c,{className:"w-5 h-5"}),E("span",{children:"متابعة الشراء"})]})]})})})})},Y=e.memo(({selectedCategory:t,onSelect:a})=>{const r=e.useMemo(()=>[{id:"all",name:"الكل",icon:c,locked:!1,comingSoon:!1},{id:"women",name:"حريمي",icon:c,locked:!1,comingSoon:!1},{id:"men",name:"رجالي",icon:c,locked:!1,comingSoon:!1},{id:"bags",name:"شنط",icon:c,locked:!0,comingSoon:!0},{id:"accessories",name:"إكسسوارات",icon:c,locked:!0,comingSoon:!0}],[]);return D("div",{className:"relative",dir:"rtl",children:[E("div",{className:"px-4 pt-3 pb-1",children:E("div",{className:"overflow-x-auto hide-scrollbar",children:E("div",{className:"flex gap-2 pb-2",children:r.map(e=>D("button",{onClick:()=>!e.locked&&a(e.id),className:`relative min-w-max flex items-center gap-2 px-4 py-2.5 rounded-full \n                          text-sm font-medium transition-all duration-200 ${e.locked?"bg-primary-50/30 text-primary-600/50 opacity-80":t===e.id?"bg-gradient-primary text-white shadow-lg":"bg-gray-50 text-slate-700 hover:bg-gray-100 hover:shadow-sm"} ${e.locked?"":"hover:scale-102 active:scale-98"}`,disabled:e.locked,children:[E(e.icon,{className:"w-4 h-4 "+(e.locked?"text-primary-400/70":t===e.id?"text-white":"text-primary-600")}),E("span",{children:e.name}),e.comingSoon&&D("div",{className:"flex items-center gap-1",children:[E(x,{className:"w-3.5 h-3.5 text-primary-400"}),E("span",{className:"text-xs text-primary-400",children:"قريباً"})]}),t===e.id&&!e.locked&&E("div",{className:"absolute -right-1 -top-1",children:E(f,{className:"w-4 h-4 text-white"})})]},e.id))})})}),E("div",{className:"absolute top-0 right-0 w-12 h-full bg-gradient-to-l from-white to-transparent pointer-events-none"}),E("div",{className:"absolute top-0 left-0 w-12 h-full bg-gradient-to-r from-white to-transparent pointer-events-none"})]})});Y.displayName="HorizontalCategoryScroller";const ee=({productCode:t})=>{const{setIsCartOpen:a}=e.useContext(C),{uiState:r,closeModal:s,openModal:i,selectCategory:l,selectProduct:n,setOrderId:o}=j({selectedCategory:"all"}),{checkAuthAndProceed:c,handlePhoneVerification:d,handleLocationUpdate:m,isLoading:h,isAuthenticated:u,userInfo:p}=A(),{products:y,loading:g,loadMore:b,updateFilters:x,setPage:f,totalPages:w}=O({}),{slides:N,loading:S}=k(),{handleCategorySelect:T}=L({updateFilters:x,setPage:f,selectCategory:l}),I=e.useCallback(()=>{i("showProfile")},[i]),P=e.useCallback(()=>{u?c({requiresAuth:!0,requiresAddress:!0,onSuccess:()=>i("showOrders"),onNoAddress:()=>i("showLocation")}):i("showLogin")},[c,u,i]),F=e.useCallback(()=>{i(u?"showFavorites":"showLogin")},[u,i]),q=e.useCallback(()=>{a(!0)},[a]),V=e.useCallback(e=>{n(e)},[n]),$=e.useCallback(e=>{o(e)},[o]),U=e.useCallback(e=>{s(e)},[s]),R=e.useCallback(async e=>{try{(await d(e)).success&&s("showLogin")}catch{}},[d,s]),Q=e.useCallback(async e=>{try{(await m(e)).success&&s("showLocation")}catch{}},[m,s]);return e.useEffect(()=>{if(t&&y.length>0){const e=y.find(e=>e.code===t);e&&n(e)}},[t,y,n]),D("div",{className:"min-h-screen bg-white",children:[E(v,{position:"top-center",toastOptions:{className:"bg-white backdrop-blur-xl border border-gray-200 rounded-2xl px-6 py-4 shadow-lg",duration:3e3,style:{color:"#1e293b",fontSize:"14px",fontWeight:"500"}}}),E("header",{children:E(B,{onOrdersClick:P,onProfileClick:I})}),E("nav",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-xl border-b border-gray-200",children:E(Y,{selectedCategory:r.selectedCategory,onSelect:T})}),D("main",{className:"pb-24",children:[E("div",{className:"p-4 pt-2 pb-2",children:E(X,{slides:N,loading:S,onSelect:V})}),E(M,{products:y,productsLoading:g,selectedCategory:r.selectedCategory,totalPages:w,loadMore:b,onProductSelect:V,checkAuthAndProceed:c,updateFilters:x,setPage:f,setSelectedCategory:l})]}),E(z,{onFavoritesClick:F,onCartClick:q}),E(K,{onOrderCreated:$,checkAuthAndProceed:c}),E(H,{uiState:r,userInfo:p,isLoading:h,onCloseModal:U,onPhoneVerification:R,onLocationUpdate:Q,onProductSelect:V,checkAuthAndProceed:c})]})};ee.propTypes={productCode:w.string};const te=({productCode:e})=>E(I,{children:E(P,{children:E(ee,{productCode:e})})});te.propTypes={productCode:w.string};export{te as default};
